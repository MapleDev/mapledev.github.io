<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[ResultReceiver在IntentService中的使用]]></title>
      <url>https://mapledev.github.io/2016/07/27/ResultReceiver%E5%9C%A8IntentService%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<h2 id="想回去通风报信，没那么简单，就能…"><a href="#想回去通风报信，没那么简单，就能…" class="headerlink" title="想回去通风报信，没那么简单，就能…"></a>想回去通风报信，没那么简单，就能…</h2><p>IntentService使用很方便，但是想在 IntentService 返回一个 String 回 Act 就有点麻烦了。简单的回调方法对于 IntentService 是无效的。因为 IntentService 是新开的一个进程，涉及到了IPC。可以想到的方法：</p>
<ol>
<li>广播</li>
<li>Binder</li>
<li>ResultReceiver<br>后者比较陌生，没关系，我画了一张不标准的时序图：<br><img src="http://oaz0grxej.bkt.clouddn.com/blog_img_Activity_IntentService_ResultReceiver%E6%97%B6%E5%BA%8F%E5%9B%BE.jpg" alt="Activity_IntentService_ResultReceiver时序图"><br>Activity_IntentService_ResultReceiver时序图<br>ps:刚注册的七牛弄得图床，test。</li>
</ol>
<a id="more"></a>
<p>具体代码就不自个写了，有个不错的贴，我就拾人牙慧了(其实是自个的代码没这位规范/注释，外加懒)，贴出:</p>
<blockquote>
<p>一、IntentService<br>IntentService继承自Service。IntentService内部有一个队列，它会把请求的Intent加入队列，然后开启一个worker thread(线程)来处理队列中的Intent，对于异步的startService请求，IntentService会处理完成一个之后再处理第二个，每一个请求都会在一个单独的worker thread中处理，不会阻塞应用程序的主线程。</p>
<p>二、ResultReceiver<br>对于ResultReceiver网上相关资料甚少，只能从官方API文档下手：<br>Generic interface for receiving a callback result from someone. Use this by creating a subclass and implement onReceiveResult(int, Bundle), which you can then pass to others and send through IPC, and receive results they supply with send(int, Bundle).</p>
<p>这段注释写得确实让我们不能获得什么有用的信息，它最关键的信息就是可以实现IPC（进程间通信）。其他的我们就从实例中学习吧（卤煮也是这么学到的）。</p>
</blockquote>
<p>三、实例：<br>ServiceResultReceiver.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceResultReceiver</span> <span class="keyword">extends</span> <span class="title">ResultReceiver</span> </span>&#123;</div><div class="line">        <span class="keyword">private</span> Receiver mReceiver;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ServiceResultReceiver</span><span class="params">(Handler handler)</span> </span>&#123;</div><div class="line">                <span class="keyword">super</span>(handler);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setReceiver</span><span class="params">(Receiver receiver)</span> </span>&#123;</div><div class="line">                mReceiver = receiver;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">/*这就是官方注释Use this by creating a subclass and implement onReceiveResult(int, Bundle)要表达的意思，如果没有例子卤煮是怎么也不会想到居然需要这么写*/</span></div><div class="line">		<span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onReceiveResult</span><span class="params">(<span class="keyword">int</span> resultCode, Bundle resultData)</span> </span>&#123;</div><div class="line">                <span class="keyword">if</span> (mReceiver != <span class="keyword">null</span>) &#123;</div><div class="line">                        mReceiver.onReceiveResult(resultCode, resultData);</div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Receiver</span> </span>&#123;</div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceiveResult</span><span class="params">(<span class="keyword">int</span> resultCode, Bundle resultData)</span></span>;</div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ForegroundActivity.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForegroundActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> <span class="keyword">implements</span> <span class="title">OnClickListener</span>, <span class="title">Receiver</span></span>&#123;</div><div class="line">        <span class="keyword">private</span> ServiceResultReceiver mResultReceiver = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">private</span> ProgressDialog pDialog;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">                <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">                setContentView(R.layout.activity_foreground);</div><div class="line">                pDialog = <span class="keyword">new</span> ProgressDialog(<span class="keyword">this</span>);</div><div class="line">                findViewById(R.id.btn_start).setOnClickListener(<span class="keyword">this</span>);</div><div class="line">                mResultReceiver = <span class="keyword">new</span> ServiceResultReceiver(<span class="keyword">new</span> Handler());</div><div class="line">                mResultReceiver.setReceiver(<span class="keyword">this</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                <span class="keyword">switch</span> (v.getId()) &#123;</div><div class="line">                        <span class="keyword">case</span> R.id.btn_start:</div><div class="line">                                Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, BackgroundService.class);</div><div class="line">                                intent.putExtra(<span class="string">"receiver"</span>, mResultReceiver);</div><div class="line">                                intent.putExtra(<span class="string">"command"</span>, <span class="string">"query"</span>);</div><div class="line">                                startService(intent);</div><div class="line">                                <span class="keyword">break</span>;</div><div class="line"></div><div class="line">                        <span class="keyword">default</span>:</div><div class="line">                                <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceiveResult</span><span class="params">(<span class="keyword">int</span> resultCode, Bundle resultData)</span> </span>&#123;<span class="comment">//接口Receiver的方法</span></div><div class="line">                <span class="keyword">switch</span> (resultCode) &#123;</div><div class="line">                        <span class="keyword">case</span> BackgroundService.STATUS_ERROR:</div><div class="line">                                pDialog.dismiss();</div><div class="line">                                <span class="keyword">break</span>;</div><div class="line">                        <span class="keyword">case</span> BackgroundService.STATUS_RUNNING:</div><div class="line">                                pDialog.show();</div><div class="line">                                <span class="keyword">break</span>;</div><div class="line">                        <span class="keyword">case</span> BackgroundService.STATUS_FINISHED:</div><div class="line">                                pDialog.dismiss();</div><div class="line">                                <span class="keyword">if</span>(resultData != <span class="keyword">null</span>)&#123;</div><div class="line">                                        String result = resultData.getString(<span class="string">"result"</span>);</div><div class="line">                                        Toast.makeText(<span class="keyword">this</span>, <span class="string">"response :"</span>+result, Toast.LENGTH_SHORT).show();</div><div class="line">                                &#125;</div><div class="line">                                <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">        &#125;</div></pre></td></tr></table></figure></p>
<p>BackgroundService .java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BackgroundService</span> <span class="keyword">extends</span> <span class="title">IntentService</span> </span>&#123;</div><div class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String SERVICE_NAME = <span class="string">"BackgroundService"</span>;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> STATUS_RUNNING = <span class="number">0x1</span>;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> STATUS_ERROR = <span class="number">0x2</span>;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> STATUS_FINISHED = <span class="number">0x3</span>;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">BackgroundService</span><span class="params">()</span> </span>&#123;</div><div class="line">                <span class="keyword">super</span>(SERVICE_NAME);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onHandleIntent</span><span class="params">(Intent intent)</span> </span>&#123;</div><div class="line">                <span class="keyword">final</span> ResultReceiver receiver = intent.getParcelableExtra(<span class="string">"receiver"</span>);<span class="comment">//获得ResultReceiver 对象</span></div><div class="line">               String command = intent.getStringExtra(<span class="string">"command"</span>);</div><div class="line">    </div><div class="line">    <span class="keyword">if</span>(<span class="string">"query"</span>.equals(command))&#123;</div><div class="line">            receiver.send(STATUS_RUNNING, <span class="keyword">null</span>);<span class="comment">//发送信息</span></div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                                Thread.sleep(<span class="number">1000</span>*<span class="number">3</span>);</div><div class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                                e.printStackTrace();</div><div class="line">                    receiver.send(STATUS_ERROR, <span class="keyword">null</span>);</div><div class="line">                        &#125;</div><div class="line">            Bundle b = <span class="keyword">new</span> Bundle();</div><div class="line">            b.putString(<span class="string">"result"</span>, <span class="string">"hello world"</span>);</div><div class="line">            receiver.send(STATUS_FINISHED, b);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="感谢："><a href="#感谢：" class="headerlink" title="感谢："></a>感谢：</h2><ul>
<li>【原】ResultReceiver在IntentService中的使用 - Android综合讨论 - 安卓巴士 - 安卓开发 - Android开发 - 安卓 - 移动互联网门户 - Powered by Discuz! - <a href="http://www.apkbus.com/android-145389-1-1.html" target="_blank" rel="external">http://www.apkbus.com/android-145389-1-1.html</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[思想汇报]]></title>
      <url>https://mapledev.github.io/2016/07/25/%E6%80%9D%E6%83%B3%E6%B1%87%E6%8A%A5/</url>
      <content type="html"><![CDATA[<p>反正这也没有什么人，就随便写点吧。<br>转眼五天过去了，没有更新。发现我有这毛病：</p>
<ul>
<li>干什么事，都是兴起，搞好了三分钟的热度</li>
</ul>
<p>就拿这博客来说，没有弄之前很想弄好，想着自个天天更新，像那些大牛一样分享助人。说不定人家一高兴，还赏我一块二块的冰棍钱。但是坚持个二三天，热度消失了，就懒癌发作了。</p>
<h2 id="检讨自己"><a href="#检讨自己" class="headerlink" title="检讨自己"></a>检讨自己</h2><p>有个小博客也是蛮好的，人生在世几十年，说不定我没有了，这里还在呢：P</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[随想]]></title>
      <url>https://mapledev.github.io/2016/07/20/%E9%9A%8F%E6%83%B3/</url>
      <content type="html"><![CDATA[<h2 id="今天一天是普通的一天，也是我一生中唯一的-2016-07-20"><a href="#今天一天是普通的一天，也是我一生中唯一的-2016-07-20" class="headerlink" title="今天一天是普通的一天，也是我一生中唯一的 2016-07-20"></a>今天一天是普通的一天，也是我一生中唯一的 2016-07-20</h2><p>时间的重要性不用再提，可是我想在这检讨自己，总是不能珍惜时间。把时间多花在有意义的地方。那什么地方是有意义呢？我想应该是：</p>
<ul>
<li>站在长长的时间维度上，多想想。</li>
<li>站在大大的空间维度上，多想想。</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[今天不宜撸代码----泛型擦除，我记住你了]]></title>
      <url>https://mapledev.github.io/2016/07/18/%E4%BB%8A%E5%A4%A9%E4%B8%8D%E5%AE%9C%E6%92%B8%E4%BB%A3%E7%A0%81----%E6%B3%9B%E5%9E%8B%E6%93%A6%E9%99%A4%EF%BC%8C%E6%88%91%E8%AE%B0%E4%BD%8F%E4%BD%A0%E4%BA%86/</url>
      <content type="html"><![CDATA[<p>昨天还说：</p>
<blockquote>
<p>有空补一个 泛型应用在 JSON 解析时的栗子。</p>
</blockquote>
<p>Flag立的飞起。劝君莫装13，会还的。。。</p>
<a id="more"></a>
<h2 id="本来的想法是这样的："><a href="#本来的想法是这样的：" class="headerlink" title="本来的想法是这样的："></a>本来的想法是这样的：</h2><ol>
<li>LoginAct点击事件发送 LoginHttpReq 请求至 LoginController。<em>(V)</em></li>
<li>LoginController 通过封装好的 HttpUtil 返回 respJSONStr。<em>(C)</em></li>
<li>解析 respJSONStr 将结果通过回调方法的参数 LoginBean 传回 LoginAct。<em>(M)</em></li>
<li>LoginAct 里创建 Handle 处理 LoginBean </li>
<li>。。。</li>
</ol>
<p>实际中，1、2、3、4不止 Login 一种，所以代码的提取显得很必要。其中今天我想把第三步抽取一个 BaseController 万能的 Controller 能对各种 JSON 做解析 handleJSON(String respJSONStr) {…} 。<br>这必然需要用到 泛型 。 但是千万要注意：</p>
<h3 id="泛型擦除-这个大坑"><a href="#泛型擦除-这个大坑" class="headerlink" title=" 泛型擦除  这个大坑"></a><strong> 泛型擦除 </strong> 这个大坑</h3><p>它会造成已知的运行错误：</p>
<ol>
<li><p>以下代码中的 <code>new TypeReference&lt;List&lt;T&gt;&gt;(){}</code> T 只是 Java 的语法糖，她只会存在编译器阶段限定 List 中的类型，编译成为 class 二进制文件 T 的生命就寝了，所以她  <code>new TypeReference&lt;List&lt;Object&gt;&gt;(){}</code>，这称为泛型擦除 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">List&lt;T&gt; rstBeans = JSON.parseObject(rstJSONStr, <span class="keyword">new</span> TypeReference&lt;List&lt;T&gt;&gt;()&#123;&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>so 当运行时 <code>RstLoginBean rstLoginBean = rstBeans.get(0);</code> 时悲剧发生了：<br><code>java.lang.ClassCastException: com.google.gson.internal.LinkedTreeMap cannot be cast to com.xznn.xzmall.bean.RstLoginBean</code><br>而 IDE 不会报任何错误。（注意 <code>LinkedTreeMap</code> cast to <code>RstLoginBean</code>）</p>
</li>
</ol>
<h2 id="喜闻乐见好人做好的轮子："><a href="#喜闻乐见好人做好的轮子：" class="headerlink" title="喜闻乐见好人做好的轮子："></a>喜闻乐见好人做好的轮子：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@author</span> MapleDev</div><div class="line">     * <span class="doctag">@time</span> 16/07/19  21:22</div><div class="line">     * <span class="doctag">@desc</span> 将 JSON String 转化成 List&lt;T&gt;</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">ArrayList&lt;T&gt; <span class="title">json2List</span><span class="params">(String json, Class&lt;T&gt; classOfT)</span> </span>&#123;</div><div class="line">        <span class="comment">// 先反序列化出ArrayList&lt;JsonObject&gt;</span></div><div class="line">        Gson gson = <span class="keyword">new</span> Gson();</div><div class="line">        Type type = <span class="keyword">new</span> TypeToken&lt;ArrayList&lt;JsonObject&gt;&gt;()&#123;&#125;.getType();</div><div class="line">        ArrayList&lt;JsonObject&gt; jsonObjs = gson.fromJson(json, type);</div><div class="line">        <span class="comment">// 然后在一个个的把JsonObject转成classOfT类型的对象</span></div><div class="line">        ArrayList&lt;T&gt; listOfT = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        <span class="keyword">for</span> (JsonObject jsonObj : jsonObjs) &#123;</div><div class="line">            listOfT.add(gson.fromJson(jsonObj, classOfT));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> listOfT;</div><div class="line">    &#125;</div><div class="line">``` </div><div class="line">OR 更简洁的写法：</div><div class="line">``` java</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@author</span> MapleDev</div><div class="line">     * <span class="doctag">@time</span> 16/07/19  21:32</div><div class="line">     * <span class="doctag">@desc</span> 将 JSON String 转化成 List&lt;T&gt;</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">List&lt;T&gt; <span class="title">json2List</span><span class="params">(String json, Class&lt;T&gt; clazz)</span> </span>&#123;</div><div class="line">        List&lt;T&gt; lst = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">        JsonArray array = <span class="keyword">new</span> JsonParser().parse(json).getAsJsonArray();</div><div class="line">        <span class="keyword">for</span> (JsonElement elem : array) &#123;</div><div class="line">            lst.add(<span class="keyword">new</span> Gson().fromJson(elem, clazz));</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> lst;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://blog.csdn.net/zxhoo/article/details/34856061" target="_blank" rel="external">GSON使用笔记（3） – 如何反序列化出List - zxh的专栏 - 博客频道 - CSDN.NET:</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[泛型的使用（小白向）]]></title>
      <url>https://mapledev.github.io/2016/07/17/%E6%B3%9B%E5%9E%8B%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%88%E5%B0%8F%E7%99%BD%E5%90%91%EF%BC%89/</url>
      <content type="html"><![CDATA[<h2 id="说起泛型，小白大多是一脸懵逼。引用我-Java-的启蒙老师马士兵的话"><a href="#说起泛型，小白大多是一脸懵逼。引用我-Java-的启蒙老师马士兵的话" class="headerlink" title="说起泛型，小白大多是一脸懵逼。引用我 Java 的启蒙老师马士兵的话"></a>说起泛型，小白大多是一脸懵逼。引用我 Java 的启蒙老师马士兵的话</h2><blockquote>
<p>豆芽菜长一房高，它也是一根菜！咋们把他摘（二声）了就不行了。</p>
</blockquote>
<p>泛型从 Java 1.5 引进，麻麻再也不用担心我 <strong> 强转类型 </strong> 了。但是，万恶的但是啊。泛型的引入对代码的可读性造成成吨的伤害。</p>
<p>泛型是什么。我就不一一解释（其实也说得不好），大家自行搜索。</p>
<p>在这我就说说泛型怎么吃好了 &gt;_&lt;</p>
<a id="more"></a>
<h2 id="先看看不用泛型会怎样："><a href="#先看看不用泛型会怎样：" class="headerlink" title="先看看不用泛型会怎样："></a>先看看不用泛型会怎样：</h2><p>ParamTypeDemo.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IParamType</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(String msg)</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParamTypeDemo</span> <span class="keyword">implements</span> <span class="title">IParamType</span></span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(String msg)</span> </span>&#123;</div><div class="line">        System.out.println(msg);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>test 方法：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParamTypeDemoTest</span> </span>&#123;</div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testPrint</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        ParamTypeDemo paramTypeString = <span class="keyword">new</span> ParamTypeDemo();</div><div class="line">        paramTypeString.print(<span class="string">"我是泛型，你会爱我么？"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>可以看到，代码比较简单。但局限性很大，只能传 String 类型，如果相传个 Date、List··· n种类型，只能写 n 中 这样无聊的代码了。。。大家应该都不想的吧。</p>
<h2 id="不过现在有了泛型是这样的："><a href="#不过现在有了泛型是这样的：" class="headerlink" title="不过现在有了泛型是这样的："></a>不过现在有了泛型是这样的：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 注意 T 的位置</span></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IParamType</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(T msg)</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParamTypeDemo</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">IParamType</span>&lt;<span class="title">T</span>&gt;</span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(T msg)</span> </span>&#123;</div><div class="line">        System.out.println(msg);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"><span class="comment">//    @Override</span></div><div class="line"><span class="comment">//    public void print(String msg) &#123;</span></div><div class="line"><span class="comment">//        System.out.print(msg);</span></div><div class="line"><span class="comment">//    &#125;</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>test 方法：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParamTypeDemoTest</span> </span>&#123;</div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testPrint</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        <span class="comment">// 打印 String 没问题</span></div><div class="line">        ParamTypeDemo&lt;String&gt; paramTypeString = <span class="keyword">new</span> ParamTypeDemo&lt;&gt;();</div><div class="line">        paramTypeString.print(<span class="string">"我是泛型，你会爱我么？"</span>);</div><div class="line"></div><div class="line">        <span class="comment">// 打印 Date 没问题</span></div><div class="line">        ParamTypeDemo&lt;java.util.Date&gt; paramTypeDate = <span class="keyword">new</span> ParamTypeDemo&lt;&gt;();</div><div class="line">        paramTypeDate.print(<span class="keyword">new</span> java.util.Date(System.currentTimeMillis()));</div><div class="line"></div><div class="line">        <span class="comment">// 我觉得还可以打印10086个都冇问题</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips:"></a>Tips:</h2><ul>
<li>泛型的 E 文是 Parameter Type （参数类型），大家可以将 <strong> <code>XXType&lt;T&gt;</code> </strong> 看成一个<strong>整体类型</strong>，类似于数组类型 <code>int[]</code></li>
<li>因为泛型可以看成是类型的一部分，所以她也拥有着类型的<strong>继承体系</strong>。</li>
<li>注意泛型继承到最后的类，就不能写虚的 T 了，需指定一个 Type 放置于 宿主类型 <code>XXType&lt;&gt;</code> 的&lt;&gt;之中。ps：如果不写，默认按照 Object 类型处理了。 </li>
<li>以上代码Demo 是个玩具代码，有空补一个 泛型应用在 JSON 解析时的栗子。</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[MySQL 免安装版 配置方法]]></title>
      <url>https://mapledev.github.io/2016/07/14/MySQL-%E5%85%8D%E5%AE%89%E8%A3%85%E7%89%88-%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95/</url>
      <content type="html"><![CDATA[<h2 id="安装步骤："><a href="#安装步骤：" class="headerlink" title="安装步骤："></a>安装步骤：</h2><ol>
<li><p>下载MySQL Community Server <a href="http://dev.mysql.com/downloads/mysql/" target="_blank" rel="external">http://dev.mysql.com/downloads/mysql/</a></p>
</li>
<li><p>解压MySQL压缩包</p>
<p>   将已下载的MySQL压缩包解压到自定义目录下,我的解压目录是:    </p>
<pre><code>D:\MapleDev\DevProgram\mysql-5.7.13-winx64
</code></pre> <a id="more"></a>    
<p>   将解压目录下默认文件 my-default.ini 拷贝一份，改名 my.ini<br>   复制下面的配置信息到 my.ini 保存</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">[client]</div><div class="line"></div><div class="line">port=3306</div><div class="line"></div><div class="line">default-character-set=utf8</div><div class="line"></div><div class="line">[mysqld]</div><div class="line"></div><div class="line">port=3306</div><div class="line"></div><div class="line">character_set_server=utf8</div><div class="line"></div><div class="line">default-storage-engine=innodb</div><div class="line"></div><div class="line"># unzip dir </div><div class="line"></div><div class="line">basedir=D:\MapleDev\DevProgram\mysql-5.7.13-winx64</div><div class="line"></div><div class="line"># unzip dir data dir</div><div class="line"></div><div class="line">datadir=D:\MapleDev\DevProgram\mysql-5.7.13-winx64\data</div><div class="line"></div><div class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</div><div class="line"></div><div class="line">[WinMySQLAdmin]</div><div class="line"></div><div class="line">D:\MapleDev\DevProgram\mysql-5.7.13-winx64\bin\mysqld.exe</div></pre></td></tr></table></figure>
</li>
<li><p>添加环境变量</p>
<p> 操作如下：</p>
<p> 1）右键单击我的电脑-&gt;属性-&gt;高级系统设置(高级)-&gt;环境变量</p>
<p>   点击系统变量下的新建按钮</p>
<p>   输入变量名：<code>MYSQL_HOME</code></p>
<p>   输入变量值：<code>D:\MapleDev\DevProgram\mysql-5.7.13-winx64</code></p>
<p>   #即为mysql的自定义解压目录。</p>
<p> 2）选择系统变量中的Path</p>
<p> 点击编辑按钮</p>
<p>   在变量值中添加变量值：<code>%MYSQL_HOME%\bin</code></p>
<p>   注意是在原有变量值后面加上这个变量，用;隔开，不能删除原来的变量值，</p>
</li>
<li><p>将mysql注册为windows系统服务</p>
<p> 1）从控制台进入到MySQL解压目录下的 bin 目录下：</p>
<p> 2）输入服务安装命令：<br><code>mysqld install MySQL --defaults-file=&quot;d:\MapleDev\DevProgram\mysql-5.7.13-winx64\my.ini&quot;</code></p>
<p> 安装成功后会提示服务安装成功。</p>
<p> <strong>移除</strong>服务命令为：<code>mysqld remove</code></p>
</li>
<li><p>启动MySQL服务</p>
<p> 启动服务命令为：<code>net start mysql</code></p>
</li>
<li><p>修改 root 账号的密码</p>
<p> 刚安装完成时root账号默认密码为空，此时可以将密码修改为指定的密码。如：root</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">c:&gt;mysql –uroot</div><div class="line"></div><div class="line">mysql&gt;show databases;</div><div class="line"></div><div class="line">mysql&gt;use mysql;</div><div class="line"></div><div class="line">mysql&gt;UPDATE user SET password=PASSWORD(&quot;root&quot;) WHERE user=&apos;root&apos;;</div><div class="line"></div><div class="line">mysql&gt;FLUSH PRIVILEGES;</div><div class="line"></div><div class="line">mysql&gt;QUIT</div></pre></td></tr></table></figure>
</li>
<li><p>MySQL控制台快捷方式建立:</p>
<p> 1）桌面右键-&gt;新建-&gt;快捷方式-&gt;对象位置输入：<code>C:\Windows\System32\cmd.exe</code></p>
<p> 快捷方式名称自己定义，确定，快捷方式建立成功</p>
<p> 2）右键单击刚才建立的快捷方式-&gt;属性-&gt;把目标一栏修改成MySQL启动参数：</p>
<p> C:\Windows\System32\cmd.exe “D:\MapleDev\DevProgram\mysql-5.7.13-winx64\bin” /k mysql -uroot -proot mysql</p>
<p> <em>解释:CMD路径 “MySQL路径bin目录” /k mysql -u用户名 -p密码 [数据库名]</em></p>
<p> 3）修改完成后点击确定保存，直接双击快捷方式即可连接到MySQL数据库</p>
</li>
</ol>
<h2 id="PS："><a href="#PS：" class="headerlink" title="PS："></a>PS：</h2><p>   从 <strong>MySQL5.7</strong> 开始，安装MySQL服务 <code>net start MySQL</code> 提示”请键入 NET     HELPMSG 3534 以获得更多的帮助”的解决办法:</p>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">1. 先删除data目录下的所有文件或者移走（初次解压没有data请忽略此步骤）。</div><div class="line">2. mysqld --initialize (初始化 data 并生成随机密码 or)   </div><div class="line">   mysqld --initialize-insecure (初始化 data，不生成随机密码)</div><div class="line">3. net start mysql</div><div class="line">4. C:\Users\Administrator&gt; mysql -uroot -p默认密码 （默认密码在新生成的 data 文件夹下的 您的计算机名.err 中，eg：_2016-07-13T10:50:57.082079Z 1 [Note] A temporary password is generated for root@localhost: T*1ng)#e2f_k_</div><div class="line">5. 修改密码：mysql&gt; ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;root&apos;;</div></pre></td></tr></table></figure>
<h2 id="Reference："><a href="#Reference：" class="headerlink" title="Reference："></a>Reference：</h2><ol>
<li>MySQL 官方文档：<a href="http://dev.mysql.com/doc/refman/5.7/en/data-directory-initialization-mysqld.html" target="_blank" rel="external">http://dev.mysql.com/doc/refman/5.7/en/data-directory-initialization-mysqld.html</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Android 坑神]]></title>
      <url>https://mapledev.github.io/2016/07/13/Android-%E5%9D%91%E7%A5%9E/</url>
      <content type="html"><![CDATA[<h2 id="ListView中使用type需要注意的东西"><a href="#ListView中使用type需要注意的东西" class="headerlink" title="ListView中使用type需要注意的东西"></a>ListView中使用type需要注意的东西</h2><p>在使用ListView时，如果使用了getItemViewType， 记得他的值一定要是从0开始计数的。 且要覆盖getViewTypeCount方法。并且让 getViewTypeCount&gt;getItemViewType 否则会有数组越界异常</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> VIEWTYPE_LOAD_MORE = <span class="number">0</span>; <span class="comment">// 切记 ViewType 从 0 开始</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> VIEWTYPE_NORMAL = <span class="number">1</span>;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="viewpager-onPageSelected没有执行"><a href="#viewpager-onPageSelected没有执行" class="headerlink" title="viewpager onPageSelected没有执行"></a>viewpager onPageSelected没有执行</h2><p>忘了在 initView() 中调用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mViewPager.setOnPageChangeListener(<span class="keyword">this</span>);</div></pre></td></tr></table></figure>
<h2 id="ListView-模拟点击-Item-时"><a href="#ListView-模拟点击-Item-时" class="headerlink" title="ListView 模拟点击 Item 时"></a>ListView 模拟点击 Item 时</h2><p>务必在 mAdapter 初始化完成后执行（一般在 Handler 的 handleMessage(Message msg) {…} 之中）<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mTopLv.performItemClick(<span class="keyword">null</span>, <span class="number">0</span>, <span class="number">0</span>);</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Android 学习笔记、摘要]]></title>
      <url>https://mapledev.github.io/2016/07/13/Android-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%81%E6%91%98%E8%A6%81/</url>
      <content type="html"><![CDATA[<a id="more"></a>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hello World]]></title>
      <url>https://mapledev.github.io/2016/07/13/hello-world/</url>
      <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    </entry>
    
  
  
</search>
