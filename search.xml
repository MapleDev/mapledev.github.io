<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[Two modules in a project cannot share the same content root]]></title>
      <url>https://mapledev.github.io/2018/07/16/Two%20modules%20in%20a%20project%20cannot%20share%20the%20same%20content%20root/</url>
      <content type="html"><![CDATA[<h3 id="懒癌发作，好久没更。开始学习后台了，有些问题记录下"><a href="#懒癌发作，好久没更。开始学习后台了，有些问题记录下" class="headerlink" title="懒癌发作，好久没更。开始学习后台了，有些问题记录下"></a>懒癌发作，好久没更。开始学习后台了，有些问题记录下</h3><ol>
<li><p>Content root “F:\xxproj\src” is defined for modules “module_1” and “module_2”. Two modules in a project cannot share the same content root.<br><img src="https://upload-images.jianshu.io/upload_images/1162834-df7688b55d921969.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Cannot Save Settings.png"><br>从 eclipse 导入至 Idea 中时报错。网上搜索都是抄来抄去，说啥</p>
<blockquote>
<p>IJ报错解决方法: 移除以前工程的JDK包.<br>根本的解决方法: 删除面板中所有的内容, 包括iml文件和JDK包, 然后重新导入工程.<br>其实删了没用的iml重启下idea就可以</p>
</blockquote>
<p>我试了P的没用。仔细观察了下 Project Structure，发现红线区还有之前项目的目录，怒删之，OJBK。<br><img src="https://upload-images.jianshu.io/upload_images/1162834-ed2bd2ba765f19c8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Project Structure.png"></p>
</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[DialogFragment]]></title>
      <url>https://mapledev.github.io/2018/04/26/DialogFragment/</url>
      <content type="html"><![CDATA[<p><img src="https://upload-images.jianshu.io/upload_images/1162834-74df6254c1aa91c6.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/310" alt="直播间私信.jpg"></p>
<h2 id="私信功能一般-app-都会有2个入口"><a href="#私信功能一般-app-都会有2个入口" class="headerlink" title="私信功能一般 app 都会有2个入口"></a>私信功能一般 app 都会有2个入口</h2><ol>
<li>在直播间以外，普通的全页面。</li>
<li>在直播间，半屏。</li>
</ol>
<a id="more"></a>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><ol>
<li>popupwindow<br>因为 pop 中不能插入一个 fragment（可能我才疏学浅，如有方法请留言告知，谢谢），基本上需要粘贴遍 LetterFragment 的代码，很不优雅。</li>
<li>DialogFragment<br>ta 可以直接插入一个 fragment，所以直接使用已经写好的 LetterFragment 。可能有点抽象，我直接贴出布局文件：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;LinearLayout</div><div class="line">    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;350dp&quot;</div><div class="line">    android:orientation=&quot;vertical&quot;</div><div class="line">    &gt;</div><div class="line"></div><div class="line">    &lt;FrameLayout</div><div class="line">        android:id=&quot;@+id/fl_container&quot;</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;match_parent&quot;/&gt;</div><div class="line"></div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
<ol>
<li>BottomSheetDialogFragment<br>基于以上一点，我们可以让 LetterDialog 继承 <code>BottomSheetDialogFragment</code>。ta是什么自行搜索。ta有个很好的特性：可以随着手势伸缩、关闭。</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[FFmpeg-遇到的一些坑]]></title>
      <url>https://mapledev.github.io/2018/02/10/FFmpeg-%E9%81%87%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E5%9D%91/</url>
      <content type="html"><![CDATA[<h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><ul>
<li>Ubuntu 16.04 LTS</li>
<li>NDK 16.1.4479499<h3 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h3></li>
<li>雷神： <a href="http://blog.csdn.net/leixiaohua1020/article/details/47008825" target="_blank" rel="external">最简单的基于FFmpeg的移动端例子：Android HelloWorld </a></li>
<li>逆流的鱼yuiop：<a href="http://blog.csdn.net/hejjunlin/article/details/52661331" target="_blank" rel="external">手把手图文并茂教你用Android Studio编译FFmpeg库并移植</a></li>
</ul>
<a id="more"></a>
<h3 id="各种报错"><a href="#各种报错" class="headerlink" title="各种报错"></a>各种报错</h3><ul>
<li>No such file or directory<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">Unknown option &quot;&quot;.</div><div class="line">See ./configure --help for available options.</div><div class="line">./build_android.sh: 22: ./build_android.sh: --cross-prefix=/home/maple/Android/Sdk/ndk-bundle/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-: not found</div><div class="line">CC	libavfilter/aeval.o</div><div class="line">In file included from libavfilter/aeval.c:26:0:</div><div class="line">./libavutil/avassert.h:30:20: fatal error: stdlib.h: No such file or directory</div><div class="line"> #include &lt;stdlib.h&gt;</div><div class="line">                    ^</div><div class="line">compilation terminated.</div><div class="line">common.mak:60: recipe for target &apos;libavfilter/aeval.o&apos; failed</div><div class="line">make: *** [libavfilter/aeval.o] Error 1</div><div class="line">CC	libavfilter/aeval.o</div><div class="line">In file included from libavfilter/aeval.c:26:0:</div><div class="line">./libavutil/avassert.h:30:20: fatal error: stdlib.h: No such file or directory</div><div class="line"> #include &lt;stdlib.h&gt;</div><div class="line">                    ^</div><div class="line">compilation terminated.</div><div class="line">common.mak:60: recipe for target &apos;libavfilter/aeval.o&apos; failed</div><div class="line">make: *** [libavfilter/aeval.o] Error 1</div></pre></td></tr></table></figure>
</li>
</ul>
<p>看着很多，很虎人，其实关键字就 <code>No such file or directory</code>。一般都是从博客copy的看不见的字符（eg：空格，回车）引起的，因为大家的OS都不一样，系统对这些字符的编码也可能不一，所以建议在纯文本编辑软件中打开显示各种空格，这样能少不少莫名其妙的坑。<br>以逆流的鱼yuiop博客为例，他系统为mac，编译 FFmpeg 脚本 shell 为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">#!/bin/sh</div><div class="line">NDK=/home/maple/Android/Sdk/ndk-bundle</div><div class="line">SYSROOT=$NDK/platforms/android-18/arch-arm</div><div class="line">TOOLCHAIN=$NDK/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64</div><div class="line">CPU=arm</div><div class="line">PREFIX=$(pwd)/android/$CPU</div><div class="line">ADDI_CFLAGS=&quot;-marm&quot;</div><div class="line"></div><div class="line">build_one() &#123;</div><div class="line">./configure \</div><div class="line">--prefix=$PREFIX \</div><div class="line">--enable-shared \</div><div class="line">--disable-static \</div><div class="line">--disable-doc \</div><div class="line">--disable-ffmpeg \</div><div class="line">--disable-ffplay \</div><div class="line">--disable-ffprobe \</div><div class="line">--disable-ffserver \</div><div class="line">--disable-avdevice \</div><div class="line">--disable-doc \</div><div class="line">--disable-symver \</div><div class="line">--cross-prefix=$TOOLCHAIN/bin/arm-linux-androideabi- \</div><div class="line">--target-os=linux \</div><div class="line">--arch=arm \</div><div class="line">--enable-cross-compile \</div><div class="line">--sysroot=$SYSROOT \</div><div class="line">--extra-cflags=&quot;-Os -fpic $ADDI_CFLAGS&quot; \</div><div class="line">--extra-ldflags=&quot;$ADDI_LDFLAGS&quot; \</div><div class="line">$ADDITIONAL_CONFIGURE_FLAG</div><div class="line">make clean</div><div class="line">make</div><div class="line">make install</div><div class="line">&#125;</div><div class="line"></div><div class="line">build_one</div></pre></td></tr></table></figure></p>
<p>在Ubuntu下编辑就会报上面的错。解决方法：在<code>build_one</code>函数中给每行敲个空行，like：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">#!/bin/sh</div><div class="line">NDK=/home/maple/Android/Sdk/ndk-bundle</div><div class="line">SYSROOT=$NDK/platforms/android-18/arch-arm</div><div class="line">TOOLCHAIN=$NDK/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64</div><div class="line">CPU=arm</div><div class="line">PREFIX=$(pwd)/android/$CPU</div><div class="line">ADDI_CFLAGS=&quot;-marm&quot;</div><div class="line"></div><div class="line">build_one() &#123;</div><div class="line"></div><div class="line">./configure \</div><div class="line"></div><div class="line">--prefix=$PREFIX \</div><div class="line"></div><div class="line">--enable-shared \</div><div class="line"></div><div class="line">--disable-static \</div><div class="line"></div><div class="line">--disable-doc \</div><div class="line"></div><div class="line">--disable-ffmpeg \</div><div class="line"></div><div class="line">--disable-ffplay \</div><div class="line"></div><div class="line">--disable-ffprobe \</div><div class="line"></div><div class="line">--disable-ffserver \</div><div class="line"></div><div class="line">--disable-avdevice \</div><div class="line"></div><div class="line">--disable-doc \</div><div class="line"></div><div class="line">--disable-symver \</div><div class="line"></div><div class="line">--cross-prefix=$TOOLCHAIN/bin/arm-linux-androideabi- \</div><div class="line"></div><div class="line">--target-os=linux \</div><div class="line"></div><div class="line">--arch=arm \</div><div class="line"></div><div class="line">--enable-cross-compile \</div><div class="line"></div><div class="line">--sysroot=$SYSROOT \</div><div class="line"></div><div class="line">--extra-cflags=&quot;-Os -fpic $ADDI_CFLAGS&quot; \</div><div class="line"></div><div class="line">--extra-ldflags=&quot;$ADDI_LDFLAGS&quot; \</div><div class="line"></div><div class="line">$ADDITIONAL_CONFIGURE_FLAG</div><div class="line"></div><div class="line">make clean</div><div class="line"></div><div class="line">make</div><div class="line"></div><div class="line">make install</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">build_one</div></pre></td></tr></table></figure></p>
<ul>
<li>NDK编译报 ‘File format not recognized’<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">maple@maple-All-Series:~/AndroidStudioProjects/FFmpegDemo/app/src/main/jni$ /home/maple/Android/Sdk/ndk-bundle/ndk-build APP_ALLOW_MISSING_DEPS=true</div><div class="line">Android NDK: APP_PLATFORM not set. Defaulting to minimum supported version android-14.    </div><div class="line">Android NDK: WARNING: APP_PLATFORM android-14 is higher than android:minSdkVersion 1 in /home/maple/AndroidStudioProjects/FFmpegDemo/app/src/main/AndroidManifest.xml. NDK binaries will *not* be comptible with devices older than android-14. See https://android.googlesource.com/platform/ndk/+/master/docs/user/common_problems.md for more information.    </div><div class="line">/home/maple/Android/Sdk/ndk-bundle/build/core/setup-app.mk:81: Android NDK: Application targets deprecated ABI(s): armeabi    </div><div class="line">/home/maple/Android/Sdk/ndk-bundle/build/core/setup-app.mk:82: Android NDK: Support for these ABIs will be removed in a future NDK release.    </div><div class="line">/home/maple/Android/Sdk/ndk-bundle/build/core/build-binary.mk:693: Android NDK: Module sffhelloworld depends on undefined modules: avdevice postproc    </div><div class="line">[armeabi] Install        : libavcodec-57.so =&gt; libs/armeabi/libavcodec-57.so</div><div class="line">/home/maple/Android/Sdk/ndk-bundle/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-strip:/home/maple/AndroidStudioProjects/FFmpegDemo/app/src/main/libs/armeabi/libavcodec-57.so: File format not recognized</div><div class="line">make: *** [/home/maple/AndroidStudioProjects/FFmpegDemo/app/src/main/libs/armeabi/libavcodec-57.so] Error 1</div><div class="line">make: *** Deleting file `/home/maple/AndroidStudioProjects/FFmpegDemo/app/src/main/libs/armeabi/libavcodec-57.so&apos;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>老样子，Dont Panic。 ‘File format not recognized’ 文件格式不能识别，那我们就去看看这是个什么格式，这就需要个 <code>file</code> 命令。</p>
<blockquote>
<p>file命令用来探测给定文件的类型。file命令对文件的检查分为文件系统、魔法幻数检查和语言检查3个过程。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">maple@maple-All-Series:~/AndroidStudioProjects/FFmpegDemo/app/src/main/jni$ file libavcodec-57.so </div><div class="line">libavcodec-57.so: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=8de4e7be651e4db057b11d72e33fffd8d19d40dd, stripped</div></pre></td></tr></table></figure></p>
</blockquote>
<p>可知这个so是x86-64类型，所以Application.mk中应该这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">APP_ABI :=x86</div></pre></td></tr></table></figure></p>
<h2 id="先写这些，遇到新坑我再来补充。有帮助的话点下赞咯-：）"><a href="#先写这些，遇到新坑我再来补充。有帮助的话点下赞咯-：）" class="headerlink" title="先写这些，遇到新坑我再来补充。有帮助的话点下赞咯 ：）"></a>先写这些，遇到新坑我再来补充。有帮助的话点下赞咯 ：）</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[oppo手机屏幕录制的问题]]></title>
      <url>https://mapledev.github.io/2017/11/20/oppo%E6%89%8B%E6%9C%BA%E5%B1%8F%E5%B9%95%E5%BD%95%E5%88%B6%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p>开发 Android 有个很痛苦的点，一样的代码，大部分手机是o的，少数手机总是特别2。最近遇到个屏幕录制的需求。一阵猛如虎似得搜索，使用系统的MediaRecorder搞定，可偏偏oppo手机上录制的mp4大小为0。经过摸索（一下午的时间）发现不仅仅需要录屏的权限<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;!--Android 5.0+ 屏幕录制--&gt;</div><div class="line">&lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;</div></pre></td></tr></table></figure></p>
<p>还TM要加上摄像头的权限：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;</div></pre></td></tr></table></figure></p>
<p>网上还没啥关于这个的记录，记录下，有帮助、被坑过的人留个爪吧 XD </p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[mkdirs-总失败，怎么办，多半]]></title>
      <url>https://mapledev.github.io/2017/03/29/mkdirs-%E6%80%BB%E5%A4%B1%E8%B4%A5%EF%BC%8C%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%8C%E5%A4%9A%E5%8D%8A/</url>
      <content type="html"><![CDATA[<p><img src="http://upload-images.jianshu.io/upload_images/1162834-eaf26a29b4b4faca.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="老家的绿"><br>今天 2017年3月29日21:24:06 遇到一个创建文件夹的坑，打个Log记录一下。</p>
<h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><p>在父文件夹下建一文件夹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">File parentFile = new File(&quot;parentFile&quot;);</div><div class="line">File childFile = new File(parentFile, &quot;childFile&quot;);</div><div class="line">if (!childFile.exists()) &#123;</div><div class="line">    boolean mkdirs = childFile.mkdirs();</div><div class="line">    Log.d(TAG, &quot;mkdirs = &quot; + mkdirs);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>很简单吧，可mkdirs 总返回false，建立不了，日了个xx</p>
<a id="more"></a>
<h3 id="摸索"><a href="#摸索" class="headerlink" title="摸索"></a>摸索</h3><p>一步步排查吧</p>
<ol>
<li><p>权限 ok</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;</div><div class="line">&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;</div></pre></td></tr></table></figure>
</li>
<li><p><code>mkdir</code> ； <code>mkdirs</code> 傻傻分不清？<br>简单来说：<code>mkdir</code>先有爸爸，再有我，慢慢来；<code>mkdirs</code> 一步到位。<br>这里用 <code>mkdirs</code> 是没问题的。</p>
</li>
<li>多线程，不存在的。<br>如果业务需要考虑多线程的情况，不要担心，一 <code>synchronized</code> 下去还让你皮。</li>
<li>还是不行，考虑下同名的问题。<br>怎么说：坑就这这里，有些文件夹并不是你看不见了他就不存在了。代码才是验证真理的唯一标准：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">boolean parentFileExists = parentFile.exists();</div><div class="line">Log.d(TAG, &quot;parentFileExists = &quot; + parentFileExists);</div></pre></td></tr></table></figure>
</li>
</ol>
<p>验证下父文件夹是否存在，有时因为各种原因，磁盘中已有了<code>parentFile</code>，但是不可见。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>如果父文件夹存在，手气刀落，删了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">File parentFile = new File(&quot;parentFile&quot;);</div><div class="line">File childFile = new File(parentFile, &quot;childFile&quot;);</div><div class="line">if (!childFile.exists()) &#123;</div><div class="line">    boolean mkdirs = childFile.mkdirs();</div><div class="line">    Log.d(TAG, &quot;mkdirs = &quot; + mkdirs);</div><div class="line">    if(!mkdirs) &#123; // 如果 建立文件夹失败 将父文件夹删除</div><div class="line">        if(parentFile.exists()) &#123;</div><div class="line">            parentFile.delete();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ps：我这里业务是这样的，代码是死的，您的思想是活的。<br>欢迎斧正，交流。O(∩_∩)O谢谢</p>
<h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><p>2017年3月30日20:55:28：<br>还有个方法，事先判断 ta 的父文件夹是否存在<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">File parentFile = new File(&quot;parentFile&quot;);</div><div class="line">File childFile = new File(parentFile, &quot;childFile&quot;);</div><div class="line">if (!childFile .getParentFile().exists()) &#123; // 事先判断 ta 的父文件夹是否存在</div><div class="line">    boolean mkdirs = childFile .getParentFile().mkdirs();</div><div class="line">    Log.w(TAG, &quot;SDCardUtil&#123;&#125; ... makedirs() --&gt; file = &quot; + file.getParentFile().getAbsolutePath() + &quot; ;mkdirs = &quot; + mkdirs);</div><div class="line">&#125;</div><div class="line">if (!childFile.exists()) &#123;</div><div class="line">    boolean mkdirs = childFile.mkdirs();</div><div class="line">    Log.d(TAG, &quot;mkdirs = &quot; + mkdirs);</div><div class="line">    if(!mkdirs) &#123; // 如果 建立文件夹失败 将父文件夹删除</div><div class="line">        if(parentFile.exists()) &#123;</div><div class="line">            parentFile.delete();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="补充2"><a href="#补充2" class="headerlink" title="补充2"></a>补充2</h3><p>2017年3月31日09:39:29<br>在 stackoverflow 发现这样一个问答，很有启发：</p>
<ul>
<li>android - “Result of method is ignored”- what does this imply? - Stack Overflow - <a href="http://stackoverflow.com/questions/38967366/result-of-method-is-ignored-what-does-this-imply" target="_blank" rel="external">http://stackoverflow.com/questions/38967366/result-of-method-is-ignored-what-does-this-imply</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[开源中国Android客户端，走你~~~]]></title>
      <url>https://mapledev.github.io/2016/08/17/%E5%BC%80%E6%BA%90%E4%B8%AD%E5%9B%BDAndroid%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%8C%E8%B5%B0%E4%BD%A0/</url>
      <content type="html"><![CDATA[<p>许久未更，罪过，罪过。。。</p>
<p>今天从开源中国下载<a href="https://git.oschina.net/oschina/android-app" target="_blank" rel="external">开源中国Android客户端</a>,从下载到运行到处充满了坑，记录一下：</p>
<h4 id="下载下来只有-git"><a href="#下载下来只有-git" class="headerlink" title="下载下来只有 .git"></a>下载下来只有 .git</h4><p>人与人最基本的信任呢？不要捉急，只需在 terminal 中键入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git clone http://git.oschina.net/oschina/android-app</div><div class="line">cd android-app</div><div class="line">git tag</div><div class="line">git checkout -b v2.x.x v2.x.x</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h4 id="Error-Could-not-find-property-‘RELEASE-STORE-FILE’-on-SigningConfig-Decorated"><a href="#Error-Could-not-find-property-‘RELEASE-STORE-FILE’-on-SigningConfig-Decorated" class="headerlink" title="Error: Could not find property ‘RELEASE_STORE_FILE’ on SigningConfig_Decorated"></a>Error: Could not find property ‘RELEASE_STORE_FILE’ on SigningConfig_Decorated</h4><p>因为在 app 的 gradler 里有签名配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">//signing files settings</div><div class="line">signingConfigs &#123;</div><div class="line"></div><div class="line">    debug &#123;</div><div class="line">         storeFile file(RELEASE_STORE_FILE)</div><div class="line">        storePassword RELEASE_STORE_PASSWORD</div><div class="line">        keyAlias RELEASE_KEY_ALIAS</div><div class="line">        keyPassword RELEASE_KEY_PASSWORD</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    release &#123;</div><div class="line">         storeFile file(RELEASE_STORE_FILE)</div><div class="line">        storePassword RELEASE_STORE_PASSWORD</div><div class="line">        keyAlias RELEASE_KEY_ALIAS</div><div class="line">        keyPassword RELEASE_KEY_PASSWORD</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>而</p>
<blockquote>
<p>作为OSC，我们不可能把自己的签名文件也送给你的。</p>
</blockquote>
<p>我们需要 指定 <code>RELEASE_STORE_FILE</code>的值，所在在项目的根目录我们新建(if not exist) <code>gradle.properties</code> ，内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">RELEASE_STORE_FILE=debug.keystore</div><div class="line">RELEASE_STORE_PASSWORD=android</div><div class="line">RELEASE_KEY_ALIAS=androiddebugkey</div><div class="line">RELEASE_KEY_PASSWORD=android</div></pre></td></tr></table></figure></p>
<h4 id="Error-warning-Ignoring-InnerClasses-attribute-for-an-anonymous-inner-class-…"><a href="#Error-warning-Ignoring-InnerClasses-attribute-for-an-anonymous-inner-class-…" class="headerlink" title="Error:warning: Ignoring InnerClasses attribute for an anonymous inner class …"></a>Error:warning: Ignoring InnerClasses attribute for an anonymous inner class …</h4><p>如果按照上面的流程走下来，应该会报这个错。（狡诈脸）<br>我卡在这很久，Google的结果有：</p>
<ul>
<li>友盟等第三方 libs 中的 jar 和你的 app 项目重复导入了</li>
<li>AndroidStudio 打签名包时 android.keystore 的密码输入错误<br>我这儿都没有，目光转向 <code>storeFile file(RELEASE_STORE_FILE)</code>，<br>最终两个配置文件修改为：</li>
</ul>
<p>app 的 <em>build.gradle</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">//signing files settings</div><div class="line">signingConfigs &#123;</div><div class="line"></div><div class="line">    debug &#123;</div><div class="line">         storeFile file(&quot;debug.keystore&quot;)</div><div class="line">        storePassword RELEASE_STORE_PASSWORD</div><div class="line">        keyAlias RELEASE_KEY_ALIAS</div><div class="line">        keyPassword RELEASE_KEY_PASSWORD</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    release &#123;</div><div class="line">         storeFile file(&quot;debug.keystore&quot;)</div><div class="line">        storePassword RELEASE_STORE_PASSWORD</div><div class="line">        keyAlias RELEASE_KEY_ALIAS</div><div class="line">        keyPassword RELEASE_KEY_PASSWORD</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><em>gradle.properties</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#RELEASE_STORE_FILE=debug.keystore</div><div class="line">RELEASE_STORE_PASSWORD=android</div><div class="line">RELEASE_KEY_ALIAS=androiddebugkey</div><div class="line">RELEASE_KEY_PASSWORD=android</div></pre></td></tr></table></figure></p>
<p>走你~~~</p>
<h2 id="感谢："><a href="#感谢：" class="headerlink" title="感谢："></a>感谢：</h2><ul>
<li>oschina/android-app - 码云 - 开源中国 - <a href="https://git.oschina.net/oschina/android-app" target="_blank" rel="external">https://git.oschina.net/oschina/android-app</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Gson不能解析出String？]]></title>
      <url>https://mapledev.github.io/2016/08/03/Gson%E4%B8%8D%E8%83%BD%E8%A7%A3%E6%9E%90%E5%87%BAString%EF%BC%9F/</url>
      <content type="html"><![CDATA[<h2 id="首先上答案：不能。"><a href="#首先上答案：不能。" class="headerlink" title="首先上答案：不能。"></a>首先上答案：不能。</h2><p>但是我们可以曲线救国。</p>
<h2 id="问题的引出"><a href="#问题的引出" class="headerlink" title="问题的引出"></a>问题的引出</h2><p>在做「看看知乎」App式需要解析如下 JsonString：<br>url：<code>http://api.kanzhihu.com/getposts</code></p>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    &quot;count&quot;: 10,</div><div class="line">    &quot;error&quot;: &quot;&quot;,</div><div class="line">    &quot;posts&quot;: [</div><div class="line">        &#123;</div><div class="line">            &quot;count&quot;: &quot;32&quot;,</div><div class="line">            &quot;date&quot;: &quot;2016-08-03&quot;,</div><div class="line">            &quot;excerpt&quot;: &quot;摘录了『军队长期不打仗投入战斗后可能会犯哪些“幼稚病”？』、『感染 HIV 是一种怎样的经历？』、『歧视可以有多可怕？』、『如何评价小米笔记本 Air？』、『说说有哪些近乎完美的男星，从外表到灵魂的那种？』、『你亲身经历过哪些听起来像段子一样的故事？』、『有哪些意料之外情理之中的好故事？』、『你认为的演技最好的大陆男演员是谁？』、『有什么适合高中生读的好书？』、『上下五千年，你认为哪一个人是中华的最大功臣？』等问题下的32个答案&quot;,</div><div class="line">            &quot;id&quot;: &quot;2354&quot;,</div><div class="line">            &quot;name&quot;: &quot;recent&quot;,</div><div class="line">            &quot;pic&quot;: &quot;http://www.kanzhihu.com/wp-content/uploads/2016/08/recent-2016-08-03.jpg&quot;,</div><div class="line">            &quot;publishtime&quot;: &quot;1470193200&quot;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &quot;count&quot;: &quot;32&quot;,</div><div class="line">            &quot;date&quot;: &quot;2016-08-03&quot;,</div><div class="line">            &quot;excerpt&quot;: &quot;摘录了『警界有哪些经典笑话？』、『如何评价「一夜之间百度云被塞满黄片」？』、『哪些歌手的真实性格和他官方人设非常不符？』、『没文化有多可怕？』、『女孩子被富养是怎样的感受？』、『战争有多残酷？』、『如何看待威海车主虐狗事件？』、『中国的工匠精神去哪了？』、『身为女性，在平时生活中有哪些事情是你格外留意的？』、『为什么国内的居民普遍觉得看病贵？』、『为什么总害怕麻烦别人？』、『如何看待滴滴收购 Uber 中国？』等问题下的32个答案&quot;,</div><div class="line">            &quot;id&quot;: &quot;2353&quot;,</div><div class="line">            &quot;name&quot;: &quot;yesterday&quot;,</div><div class="line">            &quot;pic&quot;: &quot;http://www.kanzhihu.com/wp-content/uploads/2016/08/yesterday-2016-08-03.jpg&quot;,</div><div class="line">            &quot;publishtime&quot;: &quot;1470171600&quot;</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>so 我们应建立对应的 IsErrorBean：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IsErrorBean</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * count : 10</div><div class="line">     * error :</div><div class="line">     */</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count;</div><div class="line">    <span class="keyword">private</span> String error;</div><div class="line">    <span class="keyword">private</span> ArrayList posts;</div><div class="line">	<span class="comment">// set get ignored</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>以及 PostsBean<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PostsBean</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * count : 32</div><div class="line">     * date : 2016-07-29</div><div class="line">     * excerpt : 摘录了『如何评价《幻城》电视剧？』、『为什么历史上云南的存在感很低？』、『受过良好教育的穆斯林女性对伊斯兰教是什么态度？』、『独立居住是一种怎样的体验？』、『没文化有多可怕？』、『为什么少有人同情八达岭野生动物园事件的女主，而多是冷眼咒骂甚至拍手称快的回应？』、『你亲身经历过哪些听起来像段子一样的故事？』、『国内有哪些给人印象深刻的海报？』、『有哪些让你笑到肾抽筋的段子？』、『如何看待英国每日邮报的新闻：‘广州地铁上男子称呼黑人为「黑鬼」被打耳光’？』等问题下的32个答案</div><div class="line">     * id : 2339</div><div class="line">     * name : recent</div><div class="line">     * pic : http://www.kanzhihu.com/wp-content/uploads/2016/07/recent-2016-07-29.jpg</div><div class="line">     * publishtime : 1469761200</div><div class="line">     */</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count;</div><div class="line">    <span class="keyword">private</span> String date;</div><div class="line">    <span class="keyword">private</span> String excerpt;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">    <span class="keyword">private</span> String pic;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> publishtime;</div><div class="line">	<span class="comment">// set get ignored</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在对于<code>posts</code>的类型选取上让人有点纠结。我直接给出我的经验：</p>
<ul>
<li><p>如果使用 FastJson ，posts 也可以选择 String类型，eg:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// FastJson 解析 ok</span></div><div class="line">IsErrorBean isErrorBean1 = JSON.parseObject(respJsonStr, IsErrorBean.class);</div><div class="line">	</div><div class="line"><span class="keyword">if</span> (TextUtils.isEmpty(isErrorBean1.getError())) &#123;</div><div class="line">    String posts = isErrorBean1.getPosts();</div><div class="line">    Logger.d(<span class="string">"=== 变量：posts = "</span> + posts);</div><div class="line">    postsBeans = JSON.parseArray(posts, PostsBean.class);</div><div class="line">    Logger.d(<span class="string">"=== 变量：postsBeen = "</span> + postsBeans);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>如果使用 Gson ，posts 应选择 ArrayList 类型，eg:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Gson 解析</span></div><div class="line">Gson gson = <span class="keyword">new</span> Gson();</div><div class="line">String posts = <span class="keyword">null</span>;</div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    posts = <span class="keyword">new</span> JSONObject(respJsonStr).optString(<span class="string">"posts"</span>);</div><div class="line">    Logger.d(<span class="string">"=== 变量：posts  = "</span> + posts);</div><div class="line">&#125; <span class="keyword">catch</span> (JSONException e) &#123;</div><div class="line">    e.printStackTrace();</div><div class="line">&#125;</div><div class="line">postsBeans = gson.fromJson(posts, <span class="keyword">new</span> TypeToken&lt;List&lt;PostsBean&gt;&gt;() &#123;&#125;.getType());</div><div class="line">Logger.d(<span class="string">"=== 变量：postsBeans = "</span> + postsBeans);</div></pre></td></tr></table></figure>
</li>
</ul>
<p>可以看到，我们用的曲线就是先使用了原生的<code>JSONObject</code>取出posts key的String类型的value。另外还需注意的一点就是：jsonStr反序列化（这次是gson官方文档）List应使用<code>TypeToken</code>，直接上<code>XXbean.class</code>是不行的。</p>
<h2 id="感谢："><a href="#感谢：" class="headerlink" title="感谢："></a>感谢：</h2><ul>
<li>API文档 - 看知乎 - <a href="http://www.kanzhihu.com/api-document" target="_blank" rel="external">http://www.kanzhihu.com/api-document</a></li>
<li>小梅梅</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[「懒人周末」抓包分析]]></title>
      <url>https://mapledev.github.io/2016/07/31/%E3%80%8C%E6%87%92%E4%BA%BA%E5%91%A8%E6%9C%AB%E3%80%8D%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/</url>
      <content type="html"><![CDATA[<p>声明：谨学习使用，侵删。<br><strong><em>注意，使用火狐麻麻再也不要担心我403啦～～</em></strong></p>
<h2 id="获取城市信息："><a href="#获取城市信息：" class="headerlink" title="获取城市信息："></a>获取城市信息：</h2><ul>
<li>url:<br><a href="http://api.lanrenzhoumo.com/other/common/ip_location?session_id=0000405fbe3a2aa32e2387655fa54ac8d5a4f9" target="_blank" rel="external">http://api.lanrenzhoumo.com/other/common/ip_location?session_id=0000405fbe3a2aa32e2387655fa54ac8d5a4f9</a></li>
<li>返回：<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"append_info"</span>: &#123;&#125;,</div><div class="line">    <span class="attr">"msg"</span>: <span class="string">""</span>,</div><div class="line">    <span class="attr">"result"</span>: &#123;</div><div class="line">        <span class="attr">"cityId"</span>: <span class="number">80</span>,</div><div class="line">        <span class="attr">"cityName"</span>: <span class="string">"广州"</span>,</div><div class="line">        <span class="attr">"lat"</span>: <span class="number">23.11389984794918</span>,</div><div class="line">        <span class="attr">"lon"</span>: <span class="number">113.30119382532787</span>,</div><div class="line">        <span class="attr">"provinceId"</span>: <span class="number">6</span>,</div><div class="line">        <span class="attr">"provinceName"</span>: <span class="string">""</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"status"</span>: <span class="number">200</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<a id="more"></a>
<h2 id="首页推荐信息："><a href="#首页推荐信息：" class="headerlink" title="首页推荐信息："></a>首页推荐信息：</h2><ul>
<li>url:<br><a href="http://api.lanrenzhoumo.com/main/recommend/index?session_id=0000405fbe3a2aa32e2387655fa54ac8d5a4f9&amp;v=3&amp;page=1&amp;lon=113.30119382532787&amp;lat=23.11389984794918" target="_blank" rel="external">http://api.lanrenzhoumo.com/main/recommend/index?session_id=0000405fbe3a2aa32e2387655fa54ac8d5a4f9&amp;v=3&amp;page=1&amp;lon=113.30119382532787&amp;lat=23.11389984794918</a></li>
<li>返回（part）：<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"append_info"</span>: &#123;&#125;,</div><div class="line">    <span class="attr">"msg"</span>: <span class="string">""</span>,</div><div class="line">    <span class="attr">"page_total"</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">"pagenumber"</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">"result"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"address"</span>: <span class="string">"广州市天河区冼村路358号高德公寓C座13楼1302"</span>,</div><div class="line">            <span class="attr">"biz_phone"</span>: <span class="string">""</span>,</div><div class="line">            <span class="attr">"category"</span>: <span class="string">"文艺生活"</span>,</div><div class="line">            <span class="attr">"category_id"</span>: <span class="number">14</span>,</div><div class="line">            <span class="attr">"collected_num"</span>: <span class="number">60</span>,</div><div class="line">            <span class="attr">"consult_phone"</span>: <span class="string">""</span>,</div><div class="line">            <span class="attr">"distance"</span>: <span class="number">0</span>,</div><div class="line">            <span class="attr">"front_cover_image_list"</span>: [</div><div class="line">                <span class="string">"http://image.lanrenzhoumo.com/leo/img/20160718165422_4d8e07731f6e2acd4de405e86b055519.jpg"</span>,</div><div class="line">                <span class="string">"http://image.lanrenzhoumo.com/leo/img/20160713165637_817c907d7b307ccc833f64351a57d693.jpg"</span>,</div><div class="line">                <span class="string">"http://image.lanrenzhoumo.com/leo/img/20160713170709_93afcd5a2321e9bd1f8e5e4bb39b6ae8.jpg"</span>,</div><div class="line">                <span class="string">"http://image.lanrenzhoumo.com/leo/img/20160713172057_1f646b9810c6b4528befd298a19480d2.jpg"</span>,</div><div class="line">                <span class="string">"http://image.lanrenzhoumo.com/leo/img/20160713165518_27e5fbe99f4fcb5594574fcdfc40ee35.jpg"</span></div><div class="line">            ],</div><div class="line">            <span class="attr">"item_type"</span>: <span class="string">"leo"</span>,</div><div class="line">            <span class="attr">"jump_data"</span>: <span class="string">""</span>,</div><div class="line">            <span class="attr">"jump_type"</span>: <span class="string">"leo_detail_api"</span>,</div><div class="line">            <span class="attr">"leo_id"</span>: <span class="number">1352310609</span>,</div><div class="line">            <span class="attr">"poi"</span>: <span class="string">"壹首音乐工作室"</span>,</div><div class="line">            <span class="attr">"poi_name"</span>: <span class="string">"壹首音乐工作室"</span>,</div><div class="line">            <span class="attr">"price"</span>: <span class="number">138.0</span>,</div><div class="line">            <span class="attr">"price_info"</span>: <span class="string">"138"</span>,</div><div class="line">            <span class="attr">"sell_status"</span>: <span class="number">2</span>,</div><div class="line">            <span class="attr">"show_free"</span>: <span class="literal">true</span>,</div><div class="line">            <span class="attr">"tags"</span>: [</div><div class="line">                <span class="string">"亲子"</span>,</div><div class="line">                <span class="string">"情侣"</span>,</div><div class="line">                <span class="string">"单身"</span></div><div class="line">            ],</div><div class="line">            <span class="attr">"time"</span>: &#123;</div><div class="line">                <span class="attr">"end"</span>: <span class="string">"2016-10-31 19:00:00"</span>,</div><div class="line">                <span class="attr">"start"</span>: <span class="string">"2016-07-15 11:00:00"</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">"time_desc"</span>: <span class="string">"7月15日 11:00 ~ 10月31日 19:00"</span>,</div><div class="line">            <span class="attr">"time_info"</span>: <span class="string">"截止至10月31日"</span>,</div><div class="line">            <span class="attr">"title"</span>: <span class="string">"私人定制录音体验 | 你的歌手梦从未止步于方寸之间"</span>,</div><div class="line">            <span class="attr">"viewed_num"</span>: <span class="number">1000</span>,</div><div class="line">            <span class="attr">"want_status"</span>: <span class="number">0</span></div><div class="line">        &#125;</div><div class="line">    ],</div><div class="line">    <span class="attr">"result_count"</span>: <span class="number">40</span>,</div><div class="line">    <span class="attr">"status"</span>: <span class="number">200</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="推荐详情页面："><a href="#推荐详情页面：" class="headerlink" title="推荐详情页面："></a>推荐详情页面：</h2><ul>
<li>url:<br><a href="http://api.lanrenzhoumo.com/wh/common/leo_detail?leo_id=1352310609&amp;session_id=0000405fbe3a2aa32e2387655fa54ac8d5a4f9&amp;v=4" target="_blank" rel="external">http://api.lanrenzhoumo.com/wh/common/leo_detail?leo_id=1352310609&amp;session_id=0000405fbe3a2aa32e2387655fa54ac8d5a4f9&amp;v=4</a></li>
<li>返回：<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    "append_info": &#123;&#125;,</div><div class="line">    "msg": "",</div><div class="line">    "result": &#123;</div><div class="line">        "address": "广州市天河区冼村路358号高德公寓C座13楼1302",</div><div class="line">        "biz_phone": "",</div><div class="line">        "biz_website": "",</div><div class="line">        "booking_policy": [</div><div class="line">            &#123;</div><div class="line">                "content": "请至少提前两天预约",</div><div class="line">                "type": "text"</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                "content": "为了保证您的权益，请选择懒人周末线上支付，如使用其他方式交易并在消费中产生的纠纷，懒人周末无法帮您进行调节并不承担责任，感谢您的理解与支持。",</div><div class="line">                "type": "text"</div><div class="line">            &#125;</div><div class="line">        ],</div><div class="line">        "category": &#123;</div><div class="line">            "cn_name": "文艺生活",</div><div class="line">            "icon_view": "http://image.lanrenzhoumo.com/leo/img/20150630095149_041685046565dfc5f56837093e19e9a3.png",</div><div class="line">            "id": 14</div><div class="line">        &#125;,</div><div class="line">        "city": "广州",</div><div class="line">        "collected": false,</div><div class="line">        "collected_num": 60,</div><div class="line">        "consult_phone": "",</div><div class="line">        "description": [</div><div class="line">            &#123;</div><div class="line">                "content": "你，也许一直有个歌手梦；</div><div class="line">你，也许非常喜欢约朋友去KTV唱K；</div><div class="line">你，也许没有机会接触专业歌手的录音设备；</div><div class="line">但，这一次，机会来了！",</div><div class="line">                "type": "text"</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                "content": "http://image.lanrenzhoumo.com/leo/img/20160713170709_93afcd5a2321e9bd1f8e5e4bb39b6ae8.jpg",</div><div class="line">                "size": [</div><div class="line">                    640,</div><div class="line">                    640</div><div class="line">                ],</div><div class="line">                "type": "image"</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                "content": " </div><div class="line">你的舞台不止于浴室的五平方，</div><div class="line">你的声音远比你想象得动听！</div><div class="line">让我们一圆你的歌手梦，</div><div class="line">让你的的声音得到专业老师的指导，</div><div class="line">让你的唱歌水平不断突破，持续进步！",</div><div class="line">                "type": "text"</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                "content": "http://image.lanrenzhoumo.com/leo/img/20160713170809_ca184cc8094fd83cee20587dec3d42fe.jpg",</div><div class="line">                "size": [</div><div class="line">                    1280,</div><div class="line">                    854</div><div class="line">                ],</div><div class="line">                "type": "image"</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                "content": "活动流程：</div><div class="line">Part 1. 录音前的开声练习</div><div class="line">Part 2. 进入录音棚录制歌曲</div><div class="line">Part 3. 录音后的声乐指导",</div><div class="line">                "type": "text"</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                "content": "http://image.lanrenzhoumo.com/leo/img/20160713172057_1f646b9810c6b4528befd298a19480d2.jpg",</div><div class="line">                "size": [</div><div class="line">                    3264,</div><div class="line">                    2448</div><div class="line">                ],</div><div class="line">                "type": "image"</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                "content": "http://image.lanrenzhoumo.com/leo/img/20160713172130_da1e363d61228dfa1daa7e70e8f8786e.jpg",</div><div class="line">                "size": [</div><div class="line">                    1280,</div><div class="line">                    960</div><div class="line">                ],</div><div class="line">                "type": "image"</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                "content": "活动时长：一个半小时（需提前两天与商家预约）</div><div class="line">活动时间：2016.7.15——2016.10.31</div><div class="line">活动地址：冼村路16号朱美拉公寓C座13楼</div><div class="line">活动费用：138元/人</div><div class="line">费用包含项目：录音棚录音费用/歌曲后期制作费用。",</div><div class="line">                "type": "text"</div><div class="line">            &#125;</div><div class="line">        ],</div><div class="line">        "images": [</div><div class="line">            "http://image.lanrenzhoumo.com/leo/img/20160718165422_4d8e07731f6e2acd4de405e86b055519.jpg",</div><div class="line">            "http://image.lanrenzhoumo.com/leo/img/20160713165637_817c907d7b307ccc833f64351a57d693.jpg",</div><div class="line">            "http://image.lanrenzhoumo.com/leo/img/20160713170709_93afcd5a2321e9bd1f8e5e4bb39b6ae8.jpg",</div><div class="line">            "http://image.lanrenzhoumo.com/leo/img/20160713172057_1f646b9810c6b4528befd298a19480d2.jpg",</div><div class="line">            "http://image.lanrenzhoumo.com/leo/img/20160713165518_27e5fbe99f4fcb5594574fcdfc40ee35.jpg",</div><div class="line">            "http://image.lanrenzhoumo.com/leo/img/20160713165449_3836f41781c69e9c370a0b670fbd1719.jpg",</div><div class="line">            "http://image.lanrenzhoumo.com/leo/img/20160713165526_b714815ff59835d0a614e1672960e85c.jpg",</div><div class="line">            "http://image.lanrenzhoumo.com/leo/img/20160713165416_64ec7c1e9219e7d112846ee9a26e73f6.jpg",</div><div class="line">            "http://image.lanrenzhoumo.com/leo/img/20160713165600_8bee96568e93c59d10b4e7d2b082ac26.jpg",</div><div class="line">            "http://image.lanrenzhoumo.com/leo/img/20160713171104_4ced0ddd78d4c35c334d1f74da49f1b5.jpg"</div><div class="line">        ],</div><div class="line">        "is_can_book": true,</div><div class="line">        "leo_target_id": 48234,</div><div class="line">        "leo_target_type": "sku",</div><div class="line">        "location": &#123;</div><div class="line">            "lat": "23.119255",</div><div class="line">            "lon": "113.329183"</div><div class="line">        &#125;,</div><div class="line">        "lrzm_tips": [</div><div class="line">            &#123;</div><div class="line">                "content": "本活动由壹首音乐工作室提供  · 消费时请主动出示您的6位数验证码。",</div><div class="line">                "type": "text"</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                "content": "请提前2天预约。预约电话：15989265878。",</div><div class="line">                "type": "text"</div><div class="line">            &#125;</div><div class="line">        ],</div><div class="line">        "main_title": "",</div><div class="line">        "mapicon": &#123;</div><div class="line">            "14": "http://image.lanrenzhoumo.com/leo/client/20150513172710_leaf.png"</div><div class="line">        &#125;,</div><div class="line">        "min_price": 138.0,</div><div class="line">        "origin_price": "",</div><div class="line">        "participate_status": 103,</div><div class="line">        "pay_method_list": [</div><div class="line">            1,</div><div class="line">            2,</div><div class="line">            3</div><div class="line">        ],</div><div class="line">        "poi": "壹首音乐工作室",</div><div class="line">        "price_info": "138",</div><div class="line">        "provider": "壹首音乐工作室",</div><div class="line">        "providers": "壹首音乐工作室",</div><div class="line">        "sell_restriction": &#123;</div><div class="line">            "max_num_per_oneshot": 1,</div><div class="line">            "min_num_per_oneshot": 1,</div><div class="line">            "sell_status": 2</div><div class="line">        &#125;,</div><div class="line">        "server_biz_name": "",</div><div class="line">        "sku_representation": &#123;</div><div class="line">            "max_num_per_oneshot": 1,</div><div class="line">            "min_num_per_oneshot": 1,</div><div class="line">            "represent_data": [</div><div class="line">                &#123;</div><div class="line">                    "max_num_per_oneshot": 1,</div><div class="line">                    "min_num_per_oneshot": 1,</div><div class="line">                    "origin_price": "",</div><div class="line">                    "price": 138.0,</div><div class="line">                    "price_info": "138",</div><div class="line">                    "sell_status": 2,</div><div class="line">                    "sku_id": "48234",</div><div class="line">                    "time": &#123;</div><div class="line">                        "end": "2016-10-31 19:00:00",</div><div class="line">                        "info": "7月15日 11:00 ~ 10月31日 19:00",</div><div class="line">                        "start": "2016-07-15 11:00:00"</div><div class="line">                    &#125;,</div><div class="line">                    "title": "私人定制录音体验"</div><div class="line">                &#125;</div><div class="line">            ],</div><div class="line">            "represent_type": "list",</div><div class="line">            "sell_status": 2</div><div class="line">        &#125;,</div><div class="line">        "sub_title": "",</div><div class="line">        "tags": [],</div><div class="line">        "template_id": 1,</div><div class="line">        "ticket_rule": [</div><div class="line">            &#123;</div><div class="line">                "content": "支持随时退，过期退，退款请拨打400-844-0900（周一到周五 8:30-18:00），退款会在1-2个工作日之内退回您的支付账户。",</div><div class="line">                "type": "text"</div><div class="line">            &#125;,</div><div class="line">            &#123;</div><div class="line">                "content": "如若已和商家约定，退改请先和商家协商，明确可退改后拨打以上电话。",</div><div class="line">                "type": "text"</div><div class="line">            &#125;</div><div class="line">        ],</div><div class="line">        "ticket_usage": [</div><div class="line">            &#123;</div><div class="line">                "content": "每次预定只能一人使用",</div><div class="line">                "type": "text"</div><div class="line">            &#125;</div><div class="line">        ],</div><div class="line">        "time": &#123;</div><div class="line">            "end": "2016-10-31 19:00:00",</div><div class="line">            "info": "7月15日 11:00 ~ 10月31日 19:00",</div><div class="line">            "start": "2016-07-15 11:00:00"</div><div class="line">        &#125;,</div><div class="line">        "title": "私人定制录音体验 | 你的歌手梦从未止步于方寸之间",</div><div class="line">        "trans_params": &#123;</div><div class="line">            "contacter_info": &#123;</div><div class="line">                "contactor_name": &#123;</div><div class="line">                    "restriction": "",</div><div class="line">                    "type": "fill",</div><div class="line">                    "value": ""</div><div class="line">                &#125;,</div><div class="line">                "phone": &#123;</div><div class="line">                    "restriction": "",</div><div class="line">                    "type": "fill",</div><div class="line">                    "value": ""</div><div class="line">                &#125;</div><div class="line">            &#125;,</div><div class="line">            "quantity": &#123;</div><div class="line">                "restriction": "",</div><div class="line">                "type": "fill",</div><div class="line">                "value": ""</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        "viewed_num": 1002</div><div class="line">    &#125;,</div><div class="line">    "status": 200</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="感谢："><a href="#感谢：" class="headerlink" title="感谢："></a>感谢：</h2><ul>
<li>懒人周末 - <a href="http://lanrenzhoumo.com/" target="_blank" rel="external">http://lanrenzhoumo.com/</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ResultReceiver在IntentService中的使用]]></title>
      <url>https://mapledev.github.io/2016/07/27/ResultReceiver%E5%9C%A8IntentService%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<h2 id="想回去通风报信，没那么简单，就能…"><a href="#想回去通风报信，没那么简单，就能…" class="headerlink" title="想回去通风报信，没那么简单，就能…"></a>想回去通风报信，没那么简单，就能…</h2><p>IntentService使用很方便，但是想在 IntentService 返回一个 String 回 Act 就有点麻烦了。简单的回调方法对于 IntentService 是无效的。因为 IntentService 是新开的一个进程，涉及到了IPC。可以想到的方法：</p>
<ol>
<li>广播</li>
<li>Binder</li>
<li>ResultReceiver<br>后者比较陌生，没关系，我画了一张不标准的时序图：<br><img src="http://oaz0grxej.bkt.clouddn.com/blog_img_Activity_IntentService_ResultReceiver%E6%97%B6%E5%BA%8F%E5%9B%BE.jpg" alt="Activity_IntentService_ResultReceiver时序图"><br>Activity_IntentService_ResultReceiver时序图<br>ps:刚注册的七牛弄得图床，test。</li>
</ol>
<a id="more"></a>
<p>具体代码就不自个写了，有个不错的贴，我就拾人牙慧了(其实是自个的代码没这位规范/注释，外加懒)，贴出:</p>
<blockquote>
<p>一、IntentService<br>IntentService继承自Service。IntentService内部有一个队列，它会把请求的Intent加入队列，然后开启一个worker thread(线程)来处理队列中的Intent，对于异步的startService请求，IntentService会处理完成一个之后再处理第二个，每一个请求都会在一个单独的worker thread中处理，不会阻塞应用程序的主线程。</p>
<p>二、ResultReceiver<br>对于ResultReceiver网上相关资料甚少，只能从官方API文档下手：<br>Generic interface for receiving a callback result from someone. Use this by creating a subclass and implement onReceiveResult(int, Bundle), which you can then pass to others and send through IPC, and receive results they supply with send(int, Bundle).</p>
<p>这段注释写得确实让我们不能获得什么有用的信息，它最关键的信息就是可以实现IPC（进程间通信）。其他的我们就从实例中学习吧（卤煮也是这么学到的）。</p>
</blockquote>
<p>三、实例：<br>ServiceResultReceiver.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceResultReceiver</span> <span class="keyword">extends</span> <span class="title">ResultReceiver</span> </span>&#123;</div><div class="line">        <span class="keyword">private</span> Receiver mReceiver;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ServiceResultReceiver</span><span class="params">(Handler handler)</span> </span>&#123;</div><div class="line">                <span class="keyword">super</span>(handler);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setReceiver</span><span class="params">(Receiver receiver)</span> </span>&#123;</div><div class="line">                mReceiver = receiver;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">/*这就是官方注释Use this by creating a subclass and implement onReceiveResult(int, Bundle)要表达的意思，如果没有例子卤煮是怎么也不会想到居然需要这么写*/</span></div><div class="line">		<span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onReceiveResult</span><span class="params">(<span class="keyword">int</span> resultCode, Bundle resultData)</span> </span>&#123;</div><div class="line">                <span class="keyword">if</span> (mReceiver != <span class="keyword">null</span>) &#123;</div><div class="line">                        mReceiver.onReceiveResult(resultCode, resultData);</div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Receiver</span> </span>&#123;</div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceiveResult</span><span class="params">(<span class="keyword">int</span> resultCode, Bundle resultData)</span></span>;</div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ForegroundActivity.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForegroundActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> <span class="keyword">implements</span> <span class="title">OnClickListener</span>, <span class="title">Receiver</span></span>&#123;</div><div class="line">        <span class="keyword">private</span> ServiceResultReceiver mResultReceiver = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">private</span> ProgressDialog pDialog;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">                <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">                setContentView(R.layout.activity_foreground);</div><div class="line">                pDialog = <span class="keyword">new</span> ProgressDialog(<span class="keyword">this</span>);</div><div class="line">                findViewById(R.id.btn_start).setOnClickListener(<span class="keyword">this</span>);</div><div class="line">                mResultReceiver = <span class="keyword">new</span> ServiceResultReceiver(<span class="keyword">new</span> Handler());</div><div class="line">                mResultReceiver.setReceiver(<span class="keyword">this</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                <span class="keyword">switch</span> (v.getId()) &#123;</div><div class="line">                        <span class="keyword">case</span> R.id.btn_start:</div><div class="line">                                Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, BackgroundService.class);</div><div class="line">                                intent.putExtra(<span class="string">"receiver"</span>, mResultReceiver);</div><div class="line">                                intent.putExtra(<span class="string">"command"</span>, <span class="string">"query"</span>);</div><div class="line">                                startService(intent);</div><div class="line">                                <span class="keyword">break</span>;</div><div class="line"></div><div class="line">                        <span class="keyword">default</span>:</div><div class="line">                                <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceiveResult</span><span class="params">(<span class="keyword">int</span> resultCode, Bundle resultData)</span> </span>&#123;<span class="comment">//接口Receiver的方法</span></div><div class="line">                <span class="keyword">switch</span> (resultCode) &#123;</div><div class="line">                        <span class="keyword">case</span> BackgroundService.STATUS_ERROR:</div><div class="line">                                pDialog.dismiss();</div><div class="line">                                <span class="keyword">break</span>;</div><div class="line">                        <span class="keyword">case</span> BackgroundService.STATUS_RUNNING:</div><div class="line">                                pDialog.show();</div><div class="line">                                <span class="keyword">break</span>;</div><div class="line">                        <span class="keyword">case</span> BackgroundService.STATUS_FINISHED:</div><div class="line">                                pDialog.dismiss();</div><div class="line">                                <span class="keyword">if</span>(resultData != <span class="keyword">null</span>)&#123;</div><div class="line">                                        String result = resultData.getString(<span class="string">"result"</span>);</div><div class="line">                                        Toast.makeText(<span class="keyword">this</span>, <span class="string">"response :"</span>+result, Toast.LENGTH_SHORT).show();</div><div class="line">                                &#125;</div><div class="line">                                <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">        &#125;</div></pre></td></tr></table></figure></p>
<p>BackgroundService .java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BackgroundService</span> <span class="keyword">extends</span> <span class="title">IntentService</span> </span>&#123;</div><div class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String SERVICE_NAME = <span class="string">"BackgroundService"</span>;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> STATUS_RUNNING = <span class="number">0x1</span>;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> STATUS_ERROR = <span class="number">0x2</span>;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> STATUS_FINISHED = <span class="number">0x3</span>;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">BackgroundService</span><span class="params">()</span> </span>&#123;</div><div class="line">                <span class="keyword">super</span>(SERVICE_NAME);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onHandleIntent</span><span class="params">(Intent intent)</span> </span>&#123;</div><div class="line">                <span class="keyword">final</span> ResultReceiver receiver = intent.getParcelableExtra(<span class="string">"receiver"</span>);<span class="comment">//获得ResultReceiver 对象</span></div><div class="line">               String command = intent.getStringExtra(<span class="string">"command"</span>);</div><div class="line">    </div><div class="line">    <span class="keyword">if</span>(<span class="string">"query"</span>.equals(command))&#123;</div><div class="line">            receiver.send(STATUS_RUNNING, <span class="keyword">null</span>);<span class="comment">//发送信息</span></div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                                Thread.sleep(<span class="number">1000</span>*<span class="number">3</span>);</div><div class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                                e.printStackTrace();</div><div class="line">                    receiver.send(STATUS_ERROR, <span class="keyword">null</span>);</div><div class="line">                        &#125;</div><div class="line">            Bundle b = <span class="keyword">new</span> Bundle();</div><div class="line">            b.putString(<span class="string">"result"</span>, <span class="string">"hello world"</span>);</div><div class="line">            receiver.send(STATUS_FINISHED, b);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="感谢："><a href="#感谢：" class="headerlink" title="感谢："></a>感谢：</h2><ul>
<li>【原】ResultReceiver在IntentService中的使用 - Android综合讨论 - 安卓巴士 - 安卓开发 - Android开发 - 安卓 - 移动互联网门户 - Powered by Discuz! - <a href="http://www.apkbus.com/android-145389-1-1.html" target="_blank" rel="external">http://www.apkbus.com/android-145389-1-1.html</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[思想汇报]]></title>
      <url>https://mapledev.github.io/2016/07/25/%E6%80%9D%E6%83%B3%E6%B1%87%E6%8A%A5/</url>
      <content type="html"><![CDATA[<p>反正这也没有什么人，就随便写点吧。<br>转眼五天过去了，没有更新。发现我有这毛病：</p>
<ul>
<li>干什么事，都是兴起，搞好了三分钟的热度</li>
</ul>
<p>就拿这博客来说，没有弄之前很想弄好，想着自个天天更新，像那些大牛一样分享助人。说不定人家一高兴，还赏我一块二块的冰棍钱。但是坚持个二三天，热度消失了，就懒癌发作了。</p>
<h2 id="检讨自己"><a href="#检讨自己" class="headerlink" title="检讨自己"></a>检讨自己</h2><p>有个小博客也是蛮好的，人生在世几十年，说不定我没有了，这里还在呢：P</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[随想]]></title>
      <url>https://mapledev.github.io/2016/07/20/%E9%9A%8F%E6%83%B3/</url>
      <content type="html"><![CDATA[<h2 id="今天一天是普通的一天，也是我一生中唯一的-2016-07-20"><a href="#今天一天是普通的一天，也是我一生中唯一的-2016-07-20" class="headerlink" title="今天一天是普通的一天，也是我一生中唯一的 2016-07-20"></a>今天一天是普通的一天，也是我一生中唯一的 2016-07-20</h2><p>时间的重要性不用再提，可是我想在这检讨自己，总是不能珍惜时间。把时间多花在有意义的地方。那什么地方是有意义呢？我想应该是：</p>
<ul>
<li>站在长长的时间维度上，多想想。</li>
<li>站在大大的空间维度上，多想想。</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[今天不宜撸代码----泛型擦除，我记住你了]]></title>
      <url>https://mapledev.github.io/2016/07/18/%E4%BB%8A%E5%A4%A9%E4%B8%8D%E5%AE%9C%E6%92%B8%E4%BB%A3%E7%A0%81----%E6%B3%9B%E5%9E%8B%E6%93%A6%E9%99%A4%EF%BC%8C%E6%88%91%E8%AE%B0%E4%BD%8F%E4%BD%A0%E4%BA%86/</url>
      <content type="html"><![CDATA[<p>昨天还说：</p>
<blockquote>
<p>有空补一个 泛型应用在 JSON 解析时的栗子。</p>
</blockquote>
<p>Flag立的飞起。劝君莫装13，会还的。。。</p>
<a id="more"></a>
<h2 id="本来的想法是这样的："><a href="#本来的想法是这样的：" class="headerlink" title="本来的想法是这样的："></a>本来的想法是这样的：</h2><ol>
<li>LoginAct点击事件发送 LoginHttpReq 请求至 LoginController。<em>(V)</em></li>
<li>LoginController 通过封装好的 HttpUtil 返回 respJSONStr。<em>(C)</em></li>
<li>解析 respJSONStr 将结果通过回调方法的参数 LoginBean 传回 LoginAct。<em>(M)</em></li>
<li>LoginAct 里创建 Handle 处理 LoginBean </li>
<li>。。。</li>
</ol>
<p>实际中，1、2、3、4不止 Login 一种，所以代码的提取显得很必要。其中今天我想把第三步抽取一个 BaseController 万能的 Controller 能对各种 JSON 做解析 handleJSON(String respJSONStr) {…} 。<br>这必然需要用到 泛型 。 但是千万要注意：</p>
<h3 id="泛型擦除-这个大坑"><a href="#泛型擦除-这个大坑" class="headerlink" title=" 泛型擦除  这个大坑"></a><strong> 泛型擦除 </strong> 这个大坑</h3><p>它会造成已知的运行错误：</p>
<ol>
<li><p>以下代码中的 <code>new TypeReference&lt;List&lt;T&gt;&gt;(){}</code> T 只是 Java 的语法糖，她只会存在编译器阶段限定 List 中的类型，编译成为 class 二进制文件 T 的生命就寝了，所以她  <code>new TypeReference&lt;List&lt;Object&gt;&gt;(){}</code>，这称为泛型擦除 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">List&lt;T&gt; rstBeans = JSON.parseObject(rstJSONStr, <span class="keyword">new</span> TypeReference&lt;List&lt;T&gt;&gt;()&#123;&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>so 当运行时 <code>RstLoginBean rstLoginBean = rstBeans.get(0);</code> 时悲剧发生了：<br><code>java.lang.ClassCastException: com.google.gson.internal.LinkedTreeMap cannot be cast to com.xznn.xzmall.bean.RstLoginBean</code><br>而 IDE 不会报任何错误。（注意 <code>LinkedTreeMap</code> cast to <code>RstLoginBean</code>）</p>
</li>
</ol>
<h2 id="喜闻乐见好人做好的轮子："><a href="#喜闻乐见好人做好的轮子：" class="headerlink" title="喜闻乐见好人做好的轮子："></a>喜闻乐见好人做好的轮子：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * <span class="doctag">@author</span> MapleDev</div><div class="line"> * <span class="doctag">@time</span> 16/07/19  21:22</div><div class="line"> * <span class="doctag">@desc</span> 将 JSON String 转化成 List&lt;T&gt;</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">ArrayList&lt;T&gt; <span class="title">json2List</span><span class="params">(String json, Class&lt;T&gt; classOfT)</span> </span>&#123;</div><div class="line">    <span class="comment">// 先反序列化出ArrayList&lt;JsonObject&gt;</span></div><div class="line">    Gson gson = <span class="keyword">new</span> Gson();</div><div class="line">    Type type = <span class="keyword">new</span> TypeToken&lt;ArrayList&lt;JsonObject&gt;&gt;()&#123;&#125;.getType();</div><div class="line">    ArrayList&lt;JsonObject&gt; jsonObjs = gson.fromJson(json, type);</div><div class="line">    <span class="comment">// 然后在一个个的把JsonObject转成classOfT类型的对象</span></div><div class="line">    ArrayList&lt;T&gt; listOfT = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">    <span class="keyword">for</span> (JsonObject jsonObj : jsonObjs) &#123;</div><div class="line">        listOfT.add(gson.fromJson(jsonObj, classOfT));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> listOfT;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>or 更简洁的写法：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * <span class="doctag">@author</span> MapleDev</div><div class="line"> * <span class="doctag">@time</span> 16/07/19  21:32</div><div class="line"> * <span class="doctag">@desc</span> 将 JSON String 转化成 List&lt;T&gt;</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">List&lt;T&gt; <span class="title">json2List</span><span class="params">(String json, Class&lt;T&gt; clazz)</span> </span>&#123;</div><div class="line">    List&lt;T&gt; lst = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">    JsonArray array = <span class="keyword">new</span> JsonParser().parse(json).getAsJsonArray();</div><div class="line">    <span class="keyword">for</span> (JsonElement elem : array) &#123;</div><div class="line">        lst.add(<span class="keyword">new</span> Gson().fromJson(elem, clazz));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> lst;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://blog.csdn.net/zxhoo/article/details/34856061" target="_blank" rel="external">GSON使用笔记（3） – 如何反序列化出List - zxh的专栏 - 博客频道 - CSDN.NET:</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[泛型的使用（小白向）]]></title>
      <url>https://mapledev.github.io/2016/07/17/%E6%B3%9B%E5%9E%8B%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%88%E5%B0%8F%E7%99%BD%E5%90%91%EF%BC%89/</url>
      <content type="html"><![CDATA[<h2 id="说起泛型，小白大多是一脸懵逼。引用我-Java-的启蒙老师马士兵的话"><a href="#说起泛型，小白大多是一脸懵逼。引用我-Java-的启蒙老师马士兵的话" class="headerlink" title="说起泛型，小白大多是一脸懵逼。引用我 Java 的启蒙老师马士兵的话"></a>说起泛型，小白大多是一脸懵逼。引用我 Java 的启蒙老师马士兵的话</h2><blockquote>
<p>豆芽菜长一房高，它也是一根菜！咋们把他摘（二声）了就不行了。</p>
</blockquote>
<p>泛型从 Java 1.5 引进，麻麻再也不用担心我 <strong> 强转类型 </strong> 了。但是，万恶的但是啊。泛型的引入对代码的可读性造成成吨的伤害。</p>
<p>泛型是什么。我就不一一解释（其实也说得不好），大家自行搜索。</p>
<p>在这我就说说泛型怎么吃好了 &gt;_&lt;</p>
<a id="more"></a>
<h2 id="先看看不用泛型会怎样："><a href="#先看看不用泛型会怎样：" class="headerlink" title="先看看不用泛型会怎样："></a>先看看不用泛型会怎样：</h2><p>ParamTypeDemo.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IParamType</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(String msg)</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParamTypeDemo</span> <span class="keyword">implements</span> <span class="title">IParamType</span></span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(String msg)</span> </span>&#123;</div><div class="line">        System.out.println(msg);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>test 方法：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParamTypeDemoTest</span> </span>&#123;</div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testPrint</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        ParamTypeDemo paramTypeString = <span class="keyword">new</span> ParamTypeDemo();</div><div class="line">        paramTypeString.print(<span class="string">"我是泛型，你会爱我么？"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>可以看到，代码比较简单。但局限性很大，只能传 String 类型，如果相传个 Date、List··· n种类型，只能写 n 中 这样无聊的代码了。。。大家应该都不想的吧。</p>
<h2 id="不过现在有了泛型是这样的："><a href="#不过现在有了泛型是这样的：" class="headerlink" title="不过现在有了泛型是这样的："></a>不过现在有了泛型是这样的：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 注意 T 的位置</span></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IParamType</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(T msg)</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParamTypeDemo</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">IParamType</span>&lt;<span class="title">T</span>&gt;</span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(T msg)</span> </span>&#123;</div><div class="line">        System.out.println(msg);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"><span class="comment">//    @Override</span></div><div class="line"><span class="comment">//    public void print(String msg) &#123;</span></div><div class="line"><span class="comment">//        System.out.print(msg);</span></div><div class="line"><span class="comment">//    &#125;</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>test 方法：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParamTypeDemoTest</span> </span>&#123;</div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testPrint</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        <span class="comment">// 打印 String 没问题</span></div><div class="line">        ParamTypeDemo&lt;String&gt; paramTypeString = <span class="keyword">new</span> ParamTypeDemo&lt;&gt;();</div><div class="line">        paramTypeString.print(<span class="string">"我是泛型，你会爱我么？"</span>);</div><div class="line"></div><div class="line">        <span class="comment">// 打印 Date 没问题</span></div><div class="line">        ParamTypeDemo&lt;java.util.Date&gt; paramTypeDate = <span class="keyword">new</span> ParamTypeDemo&lt;&gt;();</div><div class="line">        paramTypeDate.print(<span class="keyword">new</span> java.util.Date(System.currentTimeMillis()));</div><div class="line"></div><div class="line">        <span class="comment">// 我觉得还可以打印10086个都冇问题</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips:"></a>Tips:</h2><ul>
<li>泛型的 E 文是 Parameter Type （参数类型），大家可以将 <strong> <code>XXType&lt;T&gt;</code> </strong> 看成一个<strong>整体类型</strong>，类似于数组类型 <code>int[]</code></li>
<li>因为泛型可以看成是类型的一部分，所以她也拥有着类型的<strong>继承体系</strong>。</li>
<li>注意泛型继承到最后的类，就不能写虚的 T 了，需指定一个 Type 放置于 宿主类型 <code>XXType&lt;&gt;</code> 的&lt;&gt;之中。ps：如果不写，默认按照 Object 类型处理了。 </li>
<li>以上代码Demo 是个玩具代码，有空补一个 泛型应用在 JSON 解析时的栗子。</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[MySQL 免安装版 配置方法]]></title>
      <url>https://mapledev.github.io/2016/07/14/MySQL-%E5%85%8D%E5%AE%89%E8%A3%85%E7%89%88-%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95/</url>
      <content type="html"><![CDATA[<h2 id="安装步骤："><a href="#安装步骤：" class="headerlink" title="安装步骤："></a>安装步骤：</h2><ol>
<li><p>下载MySQL Community Server <a href="http://dev.mysql.com/downloads/mysql/" target="_blank" rel="external">http://dev.mysql.com/downloads/mysql/</a></p>
</li>
<li><p>解压MySQL压缩包</p>
<p>   将已下载的MySQL压缩包解压到自定义目录下,我的解压目录是:    </p>
<pre><code>D:\MapleDev\DevProgram\mysql-5.7.13-winx64
</code></pre> <a id="more"></a>    
<p>   将解压目录下默认文件 my-default.ini 拷贝一份，改名 my.ini<br>   复制下面的配置信息到 my.ini 保存</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">[client]</div><div class="line"></div><div class="line">port=3306</div><div class="line"></div><div class="line">default-character-set=utf8</div><div class="line"></div><div class="line">[mysqld]</div><div class="line"></div><div class="line">port=3306</div><div class="line"></div><div class="line">character_set_server=utf8</div><div class="line"></div><div class="line">default-storage-engine=innodb</div><div class="line"></div><div class="line"># unzip dir </div><div class="line"></div><div class="line">basedir=D:\MapleDev\DevProgram\mysql-5.7.13-winx64</div><div class="line"></div><div class="line"># unzip dir data dir</div><div class="line"></div><div class="line">datadir=D:\MapleDev\DevProgram\mysql-5.7.13-winx64\data</div><div class="line"></div><div class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</div><div class="line"></div><div class="line">[WinMySQLAdmin]</div><div class="line"></div><div class="line">D:\MapleDev\DevProgram\mysql-5.7.13-winx64\bin\mysqld.exe</div></pre></td></tr></table></figure>
</li>
<li><p>添加环境变量</p>
<p> 操作如下：</p>
<p> 1）右键单击我的电脑-&gt;属性-&gt;高级系统设置(高级)-&gt;环境变量</p>
<p>   点击系统变量下的新建按钮</p>
<p>   输入变量名：<code>MYSQL_HOME</code></p>
<p>   输入变量值：<code>D:\MapleDev\DevProgram\mysql-5.7.13-winx64</code></p>
<p>   #即为mysql的自定义解压目录。</p>
<p> 2）选择系统变量中的Path</p>
<p> 点击编辑按钮</p>
<p>   在变量值中添加变量值：<code>%MYSQL_HOME%\bin</code></p>
<p>   注意是在原有变量值后面加上这个变量，用;隔开，不能删除原来的变量值，</p>
</li>
<li><p>将mysql注册为windows系统服务</p>
<p> 1）从控制台进入到MySQL解压目录下的 bin 目录下：</p>
<p> 2）输入服务安装命令：<br><code>mysqld install MySQL --defaults-file=&quot;d:\MapleDev\DevProgram\mysql-5.7.13-winx64\my.ini&quot;</code></p>
<p> 安装成功后会提示服务安装成功。</p>
<p> <strong>移除</strong>服务命令为：<code>mysqld remove</code></p>
</li>
<li><p>启动MySQL服务</p>
<p> 启动服务命令为：<code>net start mysql</code></p>
</li>
<li><p>修改 root 账号的密码</p>
<p> 刚安装完成时root账号默认密码为空，此时可以将密码修改为指定的密码。如：root</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">c:&gt;mysql –uroot</div><div class="line"></div><div class="line">mysql&gt;show databases;</div><div class="line"></div><div class="line">mysql&gt;use mysql;</div><div class="line"></div><div class="line">mysql&gt;UPDATE user SET password=PASSWORD(&quot;root&quot;) WHERE user=&apos;root&apos;;</div><div class="line"></div><div class="line">mysql&gt;FLUSH PRIVILEGES;</div><div class="line"></div><div class="line">mysql&gt;QUIT</div></pre></td></tr></table></figure>
</li>
<li><p>MySQL控制台快捷方式建立:</p>
<p> 1）桌面右键-&gt;新建-&gt;快捷方式-&gt;对象位置输入：<code>C:\Windows\System32\cmd.exe</code></p>
<p> 快捷方式名称自己定义，确定，快捷方式建立成功</p>
<p> 2）右键单击刚才建立的快捷方式-&gt;属性-&gt;把目标一栏修改成MySQL启动参数：</p>
<p> C:\Windows\System32\cmd.exe “D:\MapleDev\DevProgram\mysql-5.7.13-winx64\bin” /k mysql -uroot -proot mysql</p>
<p> <em>解释:CMD路径 “MySQL路径bin目录” /k mysql -u用户名 -p密码 [数据库名]</em></p>
<p> 3）修改完成后点击确定保存，直接双击快捷方式即可连接到MySQL数据库</p>
</li>
</ol>
<h2 id="PS："><a href="#PS：" class="headerlink" title="PS："></a>PS：</h2><p>   从 <strong>MySQL5.7</strong> 开始，安装MySQL服务 <code>net start MySQL</code> 提示”请键入 NET     HELPMSG 3534 以获得更多的帮助”的解决办法:</p>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">1. 先删除data目录下的所有文件或者移走（初次解压没有data请忽略此步骤）。</div><div class="line">2. mysqld --initialize (初始化 data 并生成随机密码 or)   </div><div class="line">   mysqld --initialize-insecure (初始化 data，不生成随机密码)</div><div class="line">3. net start mysql</div><div class="line">4. C:\Users\Administrator&gt; mysql -uroot -p默认密码 （默认密码在新生成的 data 文件夹下的 您的计算机名.err 中，eg：_2016-07-13T10:50:57.082079Z 1 [Note] A temporary password is generated for root@localhost: T*1ng)#e2f_k_</div><div class="line">5. 修改密码：mysql&gt; ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;root&apos;;</div></pre></td></tr></table></figure>
<h2 id="Reference："><a href="#Reference：" class="headerlink" title="Reference："></a>Reference：</h2><ol>
<li>MySQL 官方文档：<a href="http://dev.mysql.com/doc/refman/5.7/en/data-directory-initialization-mysqld.html" target="_blank" rel="external">http://dev.mysql.com/doc/refman/5.7/en/data-directory-initialization-mysqld.html</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Android 坑神]]></title>
      <url>https://mapledev.github.io/2016/07/13/Android-%E5%9D%91%E7%A5%9E/</url>
      <content type="html"><![CDATA[<h2 id="ListView中使用type需要注意的东西"><a href="#ListView中使用type需要注意的东西" class="headerlink" title="ListView中使用type需要注意的东西"></a>ListView中使用type需要注意的东西</h2><p>在使用ListView时，如果使用了getItemViewType， 记得他的值一定要是从0开始计数的。 且要覆盖getViewTypeCount方法。并且让 getViewTypeCount&gt;getItemViewType 否则会有数组越界异常</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> VIEWTYPE_LOAD_MORE = <span class="number">0</span>; <span class="comment">// 切记 ViewType 从 0 开始</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> VIEWTYPE_NORMAL = <span class="number">1</span>;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="viewpager-onPageSelected没有执行"><a href="#viewpager-onPageSelected没有执行" class="headerlink" title="viewpager onPageSelected没有执行"></a>viewpager onPageSelected没有执行</h2><p>忘了在 initView() 中调用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mViewPager.setOnPageChangeListener(<span class="keyword">this</span>);</div></pre></td></tr></table></figure>
<h2 id="ListView-模拟点击-Item-时"><a href="#ListView-模拟点击-Item-时" class="headerlink" title="ListView 模拟点击 Item 时"></a>ListView 模拟点击 Item 时</h2><p>务必在 mAdapter 初始化完成后执行（一般在 Handler 的 handleMessage(Message msg) {…} 之中）<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mTopLv.performItemClick(<span class="keyword">null</span>, <span class="number">0</span>, <span class="number">0</span>);</div></pre></td></tr></table></figure></p>
<h2 id="以下内容为本人踩过的坑，望看到这能让你踩着我的头过去吧：）-2017-07-12-15-51-copy-from-简书"><a href="#以下内容为本人踩过的坑，望看到这能让你踩着我的头过去吧：）-2017-07-12-15-51-copy-from-简书" class="headerlink" title="以下内容为本人踩过的坑，望看到这能让你踩着我的头过去吧：）(2017.07.12 15:51 copy from 简书)"></a>以下内容为本人踩过的坑，望看到这能让你踩着我的头过去吧：）(2017.07.12 15:51 copy from 简书)</h2><h2 id="xml-中分割线要用-View，不是-view"><a href="#xml-中分割线要用-View，不是-view" class="headerlink" title="xml 中分割线要用 View，不是 view"></a>xml 中分割线要用 <code>View</code>，不是 <code>view</code></h2><h2 id="关闭资源、pop、键盘需在-onPause-中，而不是-onStop"><a href="#关闭资源、pop、键盘需在-onPause-中，而不是-onStop" class="headerlink" title="关闭资源、pop、键盘需在 onPause() 中，而不是 onStop()"></a>关闭资源、pop、键盘需在 onPause() 中，而不是 onStop()</h2><h2 id="js-调用-Android-方法，该方法的形参最好是-String-类型，否则H5-页面中有多个-js-方法调用-Android-方法，形参是-int-为-0；"><a href="#js-调用-Android-方法，该方法的形参最好是-String-类型，否则H5-页面中有多个-js-方法调用-Android-方法，形参是-int-为-0；" class="headerlink" title="js 调用 Android 方法，该方法的形参最好是 String 类型，否则H5 页面中有多个 js 方法调用 Android 方法，形参是 int 为 0；"></a>js 调用 Android 方法，该方法的形参最好是 String 类型，否则H5 页面中有多个 js 方法调用 Android 方法，形参是 int 为 0；</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// 进入 大主页</div><div class="line">@JavascriptInterface</div><div class="line">public void lookUserDetailedInfor(String id) &#123; //对应js中 douQuJS.lookUserDetailedInfor(data); ps:js 调用 Android 方法，该方法的形参最好是 String 类型，否则H5 页面中有多个 js 方法调用 Android 方法，形参是 int 为 0；</div><div class="line">    NSLog.w(TAG, &quot;WebViewFragment&#123;&#125; ... lookUserDetailedInfor() --&gt; id = &quot; + id);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="setClickable-true-不起作用-setClickable-false-要放在setOnClickListener后面，否则会不起作用"><a href="#setClickable-true-不起作用-setClickable-false-要放在setOnClickListener后面，否则会不起作用" class="headerlink" title="setClickable(true)不起作用 : setClickable(false)要放在setOnClickListener后面，否则会不起作用"></a><a href="http://blog.csdn.net/qq76627182/article/details/49559725" target="_blank" rel="external">setClickable(true)不起作用</a> : setClickable(false)要放在setOnClickListener后面，否则会不起作用</h2><h2 id="当一个-view-不显示时，考虑是不是-在-new-XXView-的同时-ButterKnife-也创建一个-字段-xxView；"><a href="#当一个-view-不显示时，考虑是不是-在-new-XXView-的同时-ButterKnife-也创建一个-字段-xxView；" class="headerlink" title="当一个 view 不显示时，考虑是不是 在 new XXView() 的同时  ButterKnife 也创建一个 字段 xxView；"></a>当一个 view 不显示时，考虑是不是 在 new XXView() 的同时  ButterKnife 也创建一个 字段 xxView；</h2><h2 id="git-pull-更新最新代码时-而本地代码有改动时会报error"><a href="#git-pull-更新最新代码时-而本地代码有改动时会报error" class="headerlink" title="git pull 更新最新代码时 而本地代码有改动时会报error:"></a>git pull 更新最新代码时 而本地代码有改动时会报error:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">error: Your local changes to the following files would be overwritten by merge:</div><div class="line">        app/src/main/java/com/blankj/androidutilcode/activity/KeyboardActivity.java</div><div class="line">Please commit your changes or stash them before you merge.</div><div class="line">Aborting</div></pre></td></tr></table></figure>
<p>解决方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git checkout -f</div><div class="line">git pull</div></pre></td></tr></table></figure></p>
<h2 id="有时不弹键盘，scrollTo-不灵，可以这样尝试下："><a href="#有时不弹键盘，scrollTo-不灵，可以这样尝试下：" class="headerlink" title="有时不弹键盘，scrollTo() 不灵，可以这样尝试下："></a>有时不弹键盘，scrollTo() 不灵，可以这样尝试下：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">HandlerUtil.runOnUiThread(new Runnable() &#123;</div><div class="line">    @Override</div><div class="line">    public void run() &#123;</div><div class="line">        KeyboardUtil.showSoftInput(et_new_label);</div><div class="line">    &#125;</div><div class="line">&#125;, 100);</div></pre></td></tr></table></figure>
<h2 id="检查项目所有的依赖包dependencies："><a href="#检查项目所有的依赖包dependencies：" class="headerlink" title="检查项目所有的依赖包dependencies："></a>检查项目所有的依赖包dependencies：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./gradlew -q dependencies &lt;module-name&gt;:dependencies --configuration compile</div></pre></td></tr></table></figure>
<h2 id="ScrollView中监听setOnScrollChangeListener-Y的位置改变titleBar的透明度，有时会影响别的页面的底色，很奇怪。这样这样尝试下："><a href="#ScrollView中监听setOnScrollChangeListener-Y的位置改变titleBar的透明度，有时会影响别的页面的底色，很奇怪。这样这样尝试下：" class="headerlink" title="ScrollView中监听setOnScrollChangeListener Y的位置改变titleBar的透明度，有时会影响别的页面的底色，很奇怪。这样这样尝试下："></a>ScrollView中监听setOnScrollChangeListener Y的位置改变titleBar的透明度，有时会影响别的页面的底色，很奇怪。这样这样尝试下：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">rl_family_title_bar.setBackgroundColor(Color.WHITE); // 若修改此 view 的透明度，必须在代码里设置背景，否则会影响一些页面的底色</div><div class="line">rl_family_title_bar.getBackground().setAlpha(0);</div><div class="line"></div><div class="line">nsv_root.setOnScrollChangeListener(new NestedScrollView.OnScrollChangeListener() &#123;</div><div class="line">    @Override</div><div class="line">    public void onScrollChange(NestedScrollView v, int scrollX, int scrollY, int oldScrollX, int oldScrollY) &#123;</div><div class="line">        int alpha = 255 * scrollY / LocalDisplay.dp2px(257);</div><div class="line">        if (alpha &lt; 0) &#123;</div><div class="line">            alpha = 0;</div><div class="line">        &#125; else if (alpha &gt; 255) &#123;</div><div class="line">            alpha = 255;</div><div class="line">        &#125;</div><div class="line">        rl_family_title_bar.getBackground().setAlpha(alpha);</div><div class="line">        if(alpha &lt; 128) &#123;</div><div class="line">            tv_title.setTextColor(Color.WHITE);</div><div class="line">            iv_back.setImageResource(R.drawable.btn_menu_back_white);</div><div class="line">        &#125; else &#123;</div><div class="line">            tv_title.setTextColor(Color.BLACK);</div><div class="line">            iv_back.setImageResource(R.drawable.btn_menu_back);</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="SurfaceView闪屏问题"><a href="#SurfaceView闪屏问题" class="headerlink" title="SurfaceView闪屏问题"></a>SurfaceView闪屏问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">getWindow().setFormat(PixelFormat.TRANSLUCENT); // in case : Android SurfaceView闪屏问题</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Android 学习笔记、摘要]]></title>
      <url>https://mapledev.github.io/2016/07/13/Android-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%81%E6%91%98%E8%A6%81/</url>
      <content type="html"><![CDATA[<ul>
<li><p>C:\Android\sdk\ndk-bundle\toolchains\arm-linux-androideabi-4.9\prebuilt\windows-<br>x86_64\bin&gt;arm-linux-androideabi-addr2line -C -f -e E:\DouQuProject\Demo_S\LQRW<br>eChat\app\build\intermediates\transforms\mergeJniLibs\debug\folders\2000\1f\main<br>\lib\armeabi-v7a\libnrtc_engine.so 001879b2</p>
</li>
<li><p>使用jarsigner对加固包进行重签名<br>jarsigner -digestalg SHA1 -sigalg MD5withRSA -verbose -keystore [your_keystore_path] -signedjar [signed_apk_name] [unsigned_apk_name] [your_keystore_alias]</p>
</li>
</ul>
<a id="more"></a>
<ul>
<li><p>应用签名证书指纹：keytool -list -v -keystore douquzhibo.jks<br>导出证书：keytool -exportcert -list -v -alias douquzhibo -keystore douquzhibo.jks</p>
</li>
<li><p>拉流地址：<a href="http://pull.douquzhibo.com/live/200046.flv" target="_blank" rel="external">http://pull.douquzhibo.com/live/200046.flv</a><br>rtmp://pull.douquzhibo.com:1935/live/200046</p>
</li>
</ul>
<p>推流地址：<a href="http://push.douquzhibo.com/104565" target="_blank" rel="external">http://push.douquzhibo.com/104565</a><br>rtmp://pull.douquzhibo.com/live/200046</p>
<ul>
<li><p>| 密度 | ic_launcher | 比例 |<br>| — | — | — |<br>| mdpi( 120dpi ~ 160dpi) | 48x48 | 1 |<br>| hdpi( 160dpi ~ 240dpi) | 72x72 | 1.5 |<br>| xhdpi( 240dpi ~ 320dpi) | 96x96 | 2 |<br>| xxhdpi( 320dpi ~ 480dpi) | 144x144 | 3 |<br>| xxxhdpi( 480dpi ~ 640dpi) | 192x192 | 4 |</p>
</li>
<li></li>
</ul>
<ol>
<li>//直接置顶，瞬间回到顶部，没有滚动过程，其中Y值可以设置为大于0的值，使Scrollview停在指定位置。<br>ScrollView.scrollTo(0,0);</li>
<li>//类似于手动拖回顶部,有滚动过程<br>ScrollView.fullScroll(View.FOCUS_UP);</li>
<li>//类似于手动拖回顶部,有滚动过程，其中Y值可以设置为大于0的值，使Scrollview停在指定位置。<br>ScrollView.smoothScrollTo(0, 0);</li>
</ol>
<ul>
<li>meusOption 与 sharedPerferences 是好基友</li>
<li>若报 ContentProvier使用时：java.lang.SecurityException: Permission Denial:XXX 解决办法 在AndroidManifest.xml里加入android:exported=”true”</li>
<li><p>mPopupWindow.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));//popu必须设置背景,不然动画不能启动，原因是popuwindow默认是没有背景的，要给popuwindow添加一个透明的背景<br>mPopupWindow.showAtLocation(parent, Gravity.TOP + Gravity.LEFT, 80, loc[1]);  //上面一句需在此句之前，要不没动画效果</p>
</li>
<li><p>getDrawable过时的替代方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// xml --&gt; Drawable</span></div><div class="line">Drawable drawable = ContextCompat.getDrawable(getContext(), R.drawable.xx);</div><div class="line"><span class="comment">// or but need API &gt;= 21 </span></div><div class="line">Drawable drawable = Context.getDrawable(R.drawable.xx);</div></pre></td></tr></table></figure>
</li>
<li><p>Android 便捷的方式实现activity变暗的效果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">* 调整窗口的透明度</div><div class="line">* <span class="doctag">@param</span> from&gt;=0&amp;&amp;from&lt;=1.0f</div><div class="line">* <span class="doctag">@param</span> to&gt;=0&amp;&amp;to&lt;=1.0f</div><div class="line">*</div><div class="line">* */</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dimBackground</span><span class="params">(<span class="keyword">final</span> <span class="keyword">float</span> from, <span class="keyword">final</span> <span class="keyword">float</span> to)</span> </span>&#123;</div><div class="line">    <span class="keyword">final</span> Window window = getWindow();</div><div class="line">    ValueAnimator valueAnimator = ValueAnimator.ofFloat(from, to);</div><div class="line">    valueAnimator.setDuration(<span class="number">500</span>);</div><div class="line">    valueAnimator.addUpdateListener(<span class="keyword">new</span> AnimatorUpdateListener() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> </span>&#123;</div><div class="line">            WindowManager.LayoutParams params = window.getAttributes();</div><div class="line">            params.alpha = (Float) animation.getAnimatedValue();</div><div class="line">            window.setAttributes(params);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    valueAnimator.start();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 然后这样调用：</span></div><div class="line"><span class="comment">/** 窗口背景变暗*/</span></div><div class="line">dimBackground(<span class="number">1.0f</span>,<span class="number">0.5f</span>);</div><div class="line"></div><div class="line"><span class="comment">/** 窗口背景变亮*/</span></div><div class="line">dimBackground(<span class="number">0.5f</span>,<span class="number">1.0f</span>);</div></pre></td></tr></table></figure>
</li>
<li><p>Glide 在 listView 优化 图片加载</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">listView.setOnScrollListener(<span class="keyword">new</span> AbsListView.OnScrollListener() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onScrollStateChanged</span><span class="params">(AbsListView view, <span class="keyword">int</span> scrollState)</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="keyword">switch</span> (scrollState) &#123;</div><div class="line">            <span class="keyword">case</span> AbsListView.OnScrollListener.SCROLL_STATE_TOUCH_SCROLL:<span class="comment">//触摸后滚动</span></div><div class="line">            <span class="keyword">case</span> AbsListView.OnScrollListener.SCROLL_STATE_IDLE:<span class="comment">//空闲状态</span></div><div class="line">                Glide.with(PigTvApp.getContext()).resumeRequests();<span class="comment">//在停止滑动的情况下，请求加载图片</span></div><div class="line">                <span class="keyword">break</span>;</div><div class="line"></div><div class="line">            <span class="keyword">case</span> AbsListView.OnScrollListener.SCROLL_STATE_FLING:<span class="comment">//滚动状态</span></div><div class="line">                Glide.with(PigTvApp.getContext()).pauseRequests();<span class="comment">//在滚动状态时，取消加载</span></div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onScroll</span><span class="params">(AbsListView view, <span class="keyword">int</span> firstVisibleItem, <span class="keyword">int</span> visibleItemCount, <span class="keyword">int</span> totalItemCount)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>先设置 adapter 再 设置 空视图</p>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hello World]]></title>
      <url>https://mapledev.github.io/2016/07/13/hello-world/</url>
      <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    </entry>
    
  
  
</search>
